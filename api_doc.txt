# ZenTao API Documentation

Total APIs: 82

## API Endpoints

### POST /tokens - Get Token

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| account | string | No | 登录名 |
| password | string | No | 密码 |

**Request Example:**

```json
{"account": "admin", "password": "123456"}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| token | string | No |  |

**Response Example:**

```json
{
    "token": "cuejkiesahl9k1j8be5bv5lndo"
}
```

---

### GET /feedbacks - Get Feedback List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| solution | No | 反馈处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| orderBy | No | 排序，默认id_desc；排序字段+下划线+asc/desc |
| page | No | 第几页，默认为1 |
| limit | No | 每页反馈数量，默认20 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 页数 |
| total | int | Yes | 反馈总数 |
| limit | int | Yes | 每页反馈数 |
| feedbacks | array | Yes | 反馈列表 |
|   └─ feedbacks.id | int | Yes | 反馈id |
|   └─ feedbacks.product | int | Yes | 所属产品 |
|   └─ feedbacks.module | int | Yes | 所属分类 |
|   └─ feedbacks.title | string | Yes | 标题 |
|   └─ feedbacks.type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
|   └─ feedbacks.solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
|   └─ feedbacks.desc | string | Yes | 描述 |
|   └─ feedbacks.status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
|   └─ feedbacks.subStatus | string | Yes | 子状态 |
|   └─ feedbacks.public | int | Yes | 公开 |
|   └─ feedbacks.notify | int | Yes | 通知 |
|   └─ feedbacks.notifyEmail | string | Yes | 通知邮箱 |
|   └─ feedbacks.likes | string | Yes | 点赞人 |
|   └─ feedbacks.result | int | Yes | 转化结果 |
|   └─ feedbacks.faq | int | Yes | FAQ |
|   └─ feedbacks.openedBy | string | Yes | 创建人 |
|   └─ feedbacks.openedDate | date | Yes | 创建时间 |
|   └─ feedbacks.reviewedBy | string | Yes | 由谁评审 |
|   └─ feedbacks.reviewedDate | date | Yes | 评审时间 |
|   └─ feedbacks.processedBy | string | Yes | 由谁处理 |
|   └─ feedbacks.processedDate | date | Yes | 处理时间 |
|   └─ feedbacks.closedBy | string | Yes | 由谁关闭 |
|   └─ feedbacks.closedDate | date | Yes | 关闭时间 |
|   └─ feedbacks.closedReason | string | Yes | 关闭原因 |
|   └─ feedbacks.editedBy | 14 | Yes | 最后处理人 |
|   └─ feedbacks.editedDate | date | Yes | 最后修改时间 |
|   └─ feedbacks.assignedTo | 14 | Yes | 指派给 |
|   └─ feedbacks.assignedDate | date | Yes | 指派时间 |
|   └─ feedbacks.feedbackBy | string | Yes | 反馈者 |
|   └─ feedbacks.mailto | string | Yes | 抄送给 |
|   └─ feedbacks.deleted | int | Yes | 已删除 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "feedbacks": [
        {
            "id": 2,
            "product": 2,
            "module": 0,
            "title": "一个反馈",
            "type": "",
            "solution": "",
            "desc": "",
            "status": "wait",
            "subStatus": "",
            "public": "0",
            "notify": "1",
            "notifyEmail": "",
            "likes": "",
            "result": 0,
            "faq": 0,
            "openedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "admin"
            },
            "openedDate": "2022-06-10T00:56:02Z",
            "reviewedBy": null,
            "reviewedDate": null,
            "processedBy": null,
            "processedDate": null,
            "closedBy": null,
            "closedDate": null,
            "closedReason": "",
            "editedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "admin"
            },
            "editedDate": "2022-06-10T00:56:02Z",
            "assignedTo": null,
            "assignedDate": "2022-06-10 08:56:02",
            "feedbackBy": "",
            "mailto": [],
            "deleted": false,
            "dept": 0
        }
    ]
}
```

---

### GET /programs - Get Program List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 10 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 访问凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| order | No | 排序，默认order_asc；排序字段+下划线+asc/desc |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| programs | array | Yes | 项目集列表 |
|   └─ programs.id | int | Yes | 项目集ID |
|   └─ programs.name | string | Yes | 项目集名称 |
|   └─ programs.budget | int | Yes | 预算金额 |
|   └─ programs.budgetUnit | string | Yes | 预算币种(CNY/USD) |
|   └─ programs.begin | date | Yes | 预计开始日期 |
|   └─ programs.end | date | Yes | 预计结束日期 |
|   └─ programs.realBegan | date | Yes | 实际开始日期 |
|   └─ programs.realEnd | date | Yes | 实际结束日期 |
|   └─ programs.parent | int | Yes | 父项目集，顶层项目集的parent为0 |
|   └─ programs.openedBy | 1 | Yes | 由谁创建 |
|   └─ programs.openedDate | datetime | Yes | 创建时间 |
|   └─ programs.PM | 1 | Yes | 项目集负责人 |
|   └─ programs.progress | int | Yes | 进度 |

**Response Example:**

```json
{
    "programs": [
        {
            "id": 6,
            "project": 0,
            "model": "",
            "type": "program",
            "lifetime": "sprint",
            "budget": "0",
            "budgetUnit": "CNY",
            "attribute": "",
            "percent": 0,
            "milestone": "0",
            "output": "",
            "auth": "",
            "parent": 0,
            "path": ",6,",
            "grade": 1,
            "name": "企业管理",
            "code": "",
            "begin": "2021-06-05",
            "end": "2022-06-04",
            "realBegan": "2021-12-01",
            "realEnd": "2021-12-01",
            "days": 0,
            "status": "doing",
            "subStatus": "",
            "pri": "1",
            "desc": "",
            "version": 0,
            "parentVersion": 0,
            "planDuration": 0,
            "realDuration": 0,
            "openedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "openedDate": "2021-04-28T03:22:04Z",
            "openedVersion": "15.0.rc3",
            "lastEditedBy": "",
            "lastEditedDate": "2021-11-30T16:00:00Z",
            "closedBy": null,
            "closedDate": "2021-11-30T16:00:00Z",
            "canceledBy": null,
            "canceledDate": "2021-11-30T16:00:00Z",
            "PO": null,
            "PM": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "QD": null,
            "RD": null,
            "team": "企业管理",
            "acl": "open",
            "whitelist": ",",
            "order": 30,
            "deleted": false,
            "progress": 0
        }
    ]
}
```

---

### POST /products - Create Product

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | Yes | 产品名称 |
| program | int | No | 所属项目集 |
| code | int | Yes | 产品代号 |
| line | int | No | 所属产品线 |
| PO | 1 | No | 产品负责人 |
| QD | 1 | No | 测试负责人 |
| RD | 1 | No | 发布负责人 |
| type | string | No | 产品类型(normal 正常 | branch 多分支 | ) |
| desc | string | No | 产品描述 |
| acl | string | No | 访问控制（open 公开 | private 私有） |
| whitelist | array | No | 白名单 |

**Request Example:**

```json
{
    "name": "测试产品",
    "code": "test",
    "program": 1
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | No | 产品ID |
| name | string | No | 产品名称 |
| program | int | No | 所属项目集 |
| code | string | No | 产品代号 |
| line | int | No | 产品线 |
| type | string | No | 产品类型(normal 正常 | branch 多分支 | platform 多平台) |
| status | string | No | 状态(normal 正常 | closed 结束) |
| PO | string | No | 产品负责人 |
| QD | string | No | 测试负责人 |
| RD | string | No | 发布负责人 |
| acl | string | No | 访问控制（open 公开 | private 私有） |
| whitelist | array | No | 白名单 |
| createdBy | string | No | 创建人 |
| createdDate | datetime | No | 创建时间 |
| desc | string | No | 产品描述 |

**Response Example:**

```json
{
    "total": 11,
    "products": [
        {
            "id": 1,
            "program": 6,
            "name": "公司企业网站建设1",
            "code": "companyWebsite",
            "bind": "0",
            "line": 0,
            "type": "normal",
            "status": "normal",
            "subStatus": "",
            "desc": "建立公司企业网站，可以更好对外展示。<br />",
            "PO": {
                "id": 2,
                "account": "productManager",
                "avatar": "",
                "realname": "产品经理"
            },
            "QD": {
                "id": 10,
                "account": "testManager",
                "avatar": "",
                "realname": "测试经理"
            },
            "RD": {
                "id": 2,
                "account": "productManager",
                "avatar": "",
                "realname": "产品经理"
            },
            "acl": "open",
            "whitelist": [],
            "reviewer": "",
            "createdBy": {
                "id": 2,
                "account": "productManager",
                "avatar": "",
                "realname": "产品经理"
            },
            "createdDate": "2012-06-05T01:57:07Z",
            "createdVersion": "",
            "order": 5,
            "deleted": "0",
            "lineName": "",
            "programName": "企业管理",
            "stories": {
                "active": 5,
                "draft": 3,
                "": 0,
                "closed": 0,
                "changed": 0
            },
            "requirements": {
                "0": "",
                "1": "draft",
                "2": "active",
                "3": "closed",
                "4": "changed",
                "": 0,
                "draft": 0,
                "active": 0,
                "closed": 0,
                "changed": 0
            },
            "plans": 0,
            "releases": 0,
            "bugs": 5,
            "unResolved": 5,
            "closedBugs": 0,
            "fixedBugs": 0,
            "thisWeekBugs": 1,
            "assignToNull": 1,
            "progress": 0
        }
    ]
}
```

---

### GET /products - Get Product List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | No | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| products | array | Yes |  |
|   └─ products.id | int | Yes | 产品ID |
|   └─ products.program | int | Yes | 所属项目集 |
|   └─ products.name | string | Yes | 产品名称 |
|   └─ products.code | string | Yes | 产品代号 |
|   └─ products.line | int | Yes | 所属产品线 |
|   └─ products.PO | 1 | No | 产品负责人 |
|   └─ products.QD | 1 | No | 测试负责人 |
|   └─ products.RD | 1 | No | 发布负责人 |
|   └─ products.type | string | Yes | 产品类型（normal 正常 | branch 多分支 | platform 多平台） |
|   └─ products.desc | string | Yes | 产品描述 |
|   └─ products.acl | string | Yes | 访问控制（open 公开 | private 私有） |
|   └─ products.whitelist | array | No | 白名单 |
|   └─ products.createdBy | 1 | Yes | 创建人 |
|   └─ products.createdDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "total": 1,
    "products": [
        {
            "id": 6,
            "program": 6,
            "name": "测试",
            "code": "",
            "bind": "1",
            "line": 0,
            "type": "normal",
            "status": "normal",
            "subStatus": "",
            "desc": "",
            "PO": {
                "id": 2,
                "account": "productManager",
                "avatar": "",
                "realname": "产品经理"
            },
            "QD": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "RD": {
                "id": 2,
                "account": "productManager",
                "avatar": "",
                "realname": "产品经理"
            },
            "acl": "private",
            "whitelist": [
                {
                    "id": 1,
                    "account": "admin",
                    "avatar": "",
                    "realname": "管理员"
                },
                {
                    "id": 2,
                    "account": "productManager",
                    "avatar": "",
                    "realname": "产品经理"
                }
            ],
            "reviewer": "",
            "createdBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "createdDate": "2021-12-01T05:17:04Z",
            "createdVersion": "15.8",
            "order": 30,
            "deleted": "0",
            "lineName": "",
            "programName": "企业管理",
            "stories": {
                "0": "",
                "1": "draft",
                "2": "active",
                "3": "closed",
                "4": "changed",
                "": 0,
                "draft": 0,
                "active": 0,
                "closed": 0,
                "changed": 0
            },
            "requirements": {
                "0": "",
                "1": "draft",
                "2": "active",
                "3": "closed",
                "4": "changed",
                "": 0,
                "draft": 0,
                "active": 0,
                "closed": 0,
                "changed": 0
            },
            "plans": 0,
            "releases": 0,
            "bugs": 0,
            "unResolved": 0,
            "closedBugs": 0,
            "fixedBugs": 0,
            "thisWeekBugs": 0,
            "assignToNull": 0,
            "progress": 0
        }
    ]
}
```

---

### GET /products/:id - Get Product Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 7 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 产品ID |
| name | string | Yes | 产品名称 |
| code | string | Yes | 产品代号 |
| program | int | Yes | 所属项目集 |
| line | int | Yes | 所属产品线 |
| type | string | Yes | 产品类型(normal 正常 | branch 多分支 | platform 多平台) |
| PO | 1 | No | 产品负责人 |
| QD | 1 | No | 测试负责人 |
| RD | 1 | No | 发布负责人 |
| desc | object | No | 产品描述 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单 |
| createdBy | 1 | Yes | 创建人 |
| createdDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 1,
    "program": 6,
    "name": "公司企业网站建设1",
    "code": "companyWebsite",
    "bind": "0",
    "line": 0,
    "type": "normal",
    "status": "normal",
    "subStatus": "",
    "desc": "建立公司企业网站，可以更好对外展示。<br />",
    "PO": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "QD": {
        "id": 10,
        "account": "testManager",
        "avatar": "",
        "realname": "测试经理"
    },
    "RD": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "acl": "open",
    "whitelist": [],
    "reviewer": "",
    "createdBy": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "createdDate": "2012-06-05T01:57:07Z",
    "createdVersion": "",
    "order": 5,
    "deleted": "0",
    "stories": {
        "active": 5,
        "draft": 3,
        "": 0,
        "closed": 0,
        "changed": 0
    },
    "plans": 0,
    "releases": 0,
    "builds": 0,
    "cases": 5,
    "projects": 0,
    "executions": 0,
    "bugs": 5,
    "docs": 0,
    "progress": 0,
    "caseReview": false
}
```

---

### PUT /product/:id - Edit Product

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | No | 访问凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | No | 产品名称 |
| code | string | No | 产品代号 |
| type | string | No | 产品类型(normal 正常 | branch 多分支 | platform 多平台) |
| line | int | No | 所属产品线 |
| program | int | No | 所属项目集 |
| status | string | No | 产品状态(normal 正常 | closed 已关闭) |
| desc | string | No | 产品描述，富文本 |

**Request Example:**

```json
{
    "name": "公司企业网站建设1"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 产品ID |
| name | string | Yes | 产品名称 |
| code | string | Yes | 产品代号 |
| program | int | Yes | 所属项目集 |
| line | int | Yes | 所属产品线 |
| type | string | Yes | 产品类型(normal 正常 | branch 多分支 | platform 多平台) |
| PO | 1 | No | 产品负责人 |
| QD | 1 | No | 测试负责人 |
| RD | 1 | No | 发布负责人 |
| desc | object | No | 产品描述 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单 |
| createdBy | 1 | Yes | 创建人 |
| createdDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 1,
    "program": 6,
    "name": "公司企业网站建设1",
    "code": "companyWebsite",
    "bind": "0",
    "line": 0,
    "type": "normal",
    "status": "normal",
    "subStatus": "",
    "desc": "建立公司企业网站，可以更好对外展示。<br />",
    "PO": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "QD": {
        "id": 10,
        "account": "testManager",
        "avatar": "",
        "realname": "测试经理"
    },
    "RD": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "acl": "open",
    "whitelist": [],
    "reviewer": "",
    "createdBy": {
        "id": 2,
        "account": "productManager",
        "avatar": "",
        "realname": "产品经理"
    },
    "createdDate": "2012-06-05T01:57:07Z",
    "createdVersion": "",
    "order": 5,
    "deleted": "0",
    "stories": {
        "active": 5,
        "draft": 3,
        "": 0,
        "closed": 0,
        "changed": 0
    },
    "plans": 0,
    "releases": 0,
    "builds": 0,
    "cases": 5,
    "projects": 0,
    "executions": 0,
    "bugs": 5,
    "docs": 0,
    "progress": 0,
    "caseReview": false
}
```

---

### POST /projects - Create Project

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | Yes | 项目名称 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| products | array | Yes | 关联产品，比如 [1, 2]，不能为空。 |
| code | string | Yes | 项目编号 |
| model | string | No | 项目模型，默认为scrum |
| parent | int | No | 所属项目集，默认为0 |

**Request Example:**

```json
{
    "name": "test",
    "code": "test",
    "begin": "2021-01-01",
    "end": "2022-01-01",
    "products": [1]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 项目编号 |
| model | string | Yes | 项目模型(scrum 敏捷 | waterfall 瀑布) |
| budget | int | Yes | 预算金额 |
| budgetUnit | string | Yes | 预算币种(CNY | USD) |
| parent | int | Yes | 所属项目集 |
| name | string | Yes | 项目名称 |
| code | string | Yes | 项目代号 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| realBegan | date | No | 实际开始日期 |
| realEnd | date | No | 实际结束日期 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 9,
    "model": "scrum",
    "type": "project",
    "lifetime": "",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 0,
    "path": ",9,",
    "grade": 1,
    "name": "test",
    "code": "test",
    "begin": "2021-01-01",
    "end": "2022-01-01",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 0,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-25T09:12:30Z",
    "openedVersion": "",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-25T09:12:30Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "",
    "QD": "",
    "RD": "",
    "team": "test",
    "acl": "private",
    "whitelist": ",",
    "order": 45,
    "deleted": "0"
}
```

---

### DELETE /product/:id - Delete Product

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | No | 响应信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### GET /projects - Get Project List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| page | No | 第几页，默认为1 |
| limit | No | 每页项目数量，默认20 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 页数 |
| total | int | Yes | 项目总数 |
| limit | int | Yes | 每页项目数 |
| projects | array | Yes | 项目列表 |
|   └─ projects.id | int | Yes | 项目id |
|   └─ projects.name | string | Yes | 项目名称 |
|   └─ projects.code | string | Yes | 项目编号 |
|   └─ projects.model | string | Yes | 项目模型(scrum敏捷 | waterfall 瀑布) |
|   └─ projects.budget | int | Yes | 项目预算 |
|   └─ projects.budgetUnit | string | Yes | 预算币种(CNY | USD) |
|   └─ projects.parent | int | Yes | 所属项目集 |
|   └─ projects.begin | date | Yes | 预计开始日期 |
|   └─ projects.end | date | Yes | 预计结束日期 |
|   └─ projects.status | string | Yes | 项目状态(wait 未开始 | doing 进行中 | suspend 已挂起 | closed 已关闭) |
|   └─ projects.openedBy | string | Yes | 创建人 |
|   └─ projects.openedDate | datetime | No | 创建时间 |
|   └─ projects.PM | string | No | 项目经理 |
|   └─ projects.progress | int | No | 进度 |

**Response Example:**

```json
{
    "page": 1,
    "total": 2,
    "limit": 20,
    "projects": [
        {
            "id": 7,
            "name": "企业管理系统",
            "code": "",
            "model": "scrum",
            "type": "project",
            "budget": "0",
            "budgetUnit": "CNY",
            "parent": 6,
            "begin": "2021-06-05",
            "end": "2022-06-04",
            "status": "doing",
            "openedBy": "admin",
            "openedDate": "2021-04-28T03:22:04Z",
            "PM": "projectManager",
            "progress": 33
        },
        {
            "id": 8,
            "name": "分支项目",
            "code": "bb",
            "model": "scrum",
            "type": "project",
            "budget": "",
            "budgetUnit": "CNY",
            "parent": 6,
            "begin": "2021-11-23",
            "end": "2021-12-23",
            "status": "wait",
            "openedBy": "admin",
            "openedDate": "2021-11-23T07:45:16Z",
            "PM": "",
            "progress": 0
        }
    ]
}
```

---

### GET /projects/:id - Get Project Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 项目编号 |
| parent | int | Yes | 所属项目集 |
| model | string | Yes | 项目模型(scrum 敏捷 | waterfall 瀑布) |
| budget | int | Yes | 项目预算金额 |
| budgetUnit | string | Yes | 预算币种(CNY | USD) |
| name | string | Yes | 项目名称 |
| code | string | Yes | 项目编号 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| realBegan | date | Yes | 实际开始日期 |
| realEnd | date | Yes | 实际结束日期 |
| status | string | Yes | 项目状态(wait 未开始 | doing 进行中 | suspend 已挂起 | closed 已关闭) |
| desc | string | Yes | 项目描述 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| PM | 1 | Yes | 项目负责人 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | Yes | 白名单 |

**Response Example:**

```json
{
    "id": 7,
    "project": 0,
    "model": "scrum",
    "type": "project",
    "lifetime": "sprint",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "extend",
    "parent": 6,
    "path": ",6,7,",
    "grade": 2,
    "name": "企业管理系统",
    "code": "",
    "begin": "2021-06-05",
    "end": "2022-06-04",
    "realBegan": null,
    "realEnd": null,
    "days": 0,
    "status": "doing",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-04-28T03:22:04Z",
    "openedVersion": "15.0.rc3",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-04-28T03:22:04Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "projectManager",
    "QD": "",
    "RD": "",
    "team": "",
    "acl": "open",
    "whitelist": ",tester3,admin",
    "order": 35,
    "deleted": false,
    "caseReview": false
}
```

---

### PUT /programs/:id - Update Program

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 7 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | No | 项目名称 |
| parent | string | No | 父项目集，0表示没有父项目集 |
| PM | string | No | 项目负责人 |
| budget | int | No | 预算金额 |
| budgetUnit | string | No | 预算币种(CNY | USD) |
| desc | string | No | 项目集描述 |
| begin | date | No | 预计开始日期 |
| end | date | No | 预计结束日期 |
| acl | string | No | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单 |

**Request Example:**

```json
{
    "name": "项目集",
    "PM": "admin"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes |  |
| name | string | Yes | 项目名称 |
| budget | int | Yes | 预算金额 |
| budgetUnit | string | Yes | 预算币种(CNY | USD) |
| parent | int | Yes | 父项目集 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| realBegan | date | Yes | 实际开始日期 |
| realEnd | date | Yes | 实际结束日期 |
| desc | string | Yes | 项目集描述 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | string | Yes | 创建时间 |
| PM | 1 | No | 负责人 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | Yes | 白名单 |

**Response Example:**

```json
{
    "id": 12,
    "project": 0,
    "model": "",
    "type": "program",
    "lifetime": "",
    "budget": "",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "extend",
    "parent": 0,
    "path": ",12,",
    "grade": 1,
    "name": "项目集",
    "code": "tt",
    "begin": "2021-11-26",
    "end": "2021-12-26",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 21,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-26T02:27:15Z",
    "openedVersion": "",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-26T02:33:18Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "admin",
    "QD": "",
    "RD": "",
    "team": "修改项目",
    "acl": "private",
    "whitelist": ",",
    "order": 60,
    "deleted": "0"
}
```

---

### GET /projects/:id/executions - Get Project Execution List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | 执行总数 |
| limit | int | Yes | 每页执行数 |
| executions | array | Yes | 执行列表 |
|   └─ executions.id | int | Yes | 执行ID |
|   └─ executions.name | string | Yes | 执行名称 |
|   └─ executions.code | string | Yes | 执行代号 |
|   └─ executions.begin | date | Yes | 计划开始日期 |
|   └─ executions.end | date | Yes | 计划结束日期 |
|   └─ executions.status | string | Yes | 执行状态() |
|   └─ executions.openedBy | 1 | Yes | 创建人 |
|   └─ executions.openedDate | datetime | Yes | 创建时间 |
|   └─ executions.progress | int | Yes | 当前进度 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "executions": [
        {
            "id": 13,
            "name": "迭代1",
            "project": 12,
            "code": "sprint1",
            "type": "sprint",
            "parent": 12,
            "begin": "2021-11-26",
            "end": "2021-12-02",
            "status": "wait",
            "openedBy": "admin",
            "openedDate": "2021-11-26T02:42:22Z",
            "progress": 0
        }
    ]
}
```

---

### PUT /projects/:id - Update Project

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | No | 项目名称 |
| code | string | No | 项目代号 |
| parent | int | No | 所属项目集 |
| PM | int | No | 项目负责人 |
| budget | int | No | 项目预算金额 |
| budgetUnit | string | No | 预算币种(CNY | USD) |
| days | int | No | 可用工作日 |
| desc | string | No | 项目描述 |
| acl | string | No | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单 |
| auth | string | No | 权限控制(extend 继承 | reset 重新定义) |

**Request Example:**

```json
{
    "name": "修改项目",
    "PM": "admin"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 项目名称 |
| name | string | No | 项目名称 |
| parent | int | No | 所属项目集 |
| code | string | No | 项目代号 |
| PM | 1 | No | 项目负责人 |
| budget | int | No | 项目预算金额 |
| budgetUnit | string | No | 预算币种(CNY | USD) |
| days | int | No | 可用工作日 |
| desc | string | No | 项目描述 |
| acl | string | No | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单 |
| auth | string | No | 权限控制(extend 继承 | reset 重新定义) |

**Response Example:**

```json
{
    "id": 12,
    "project": 0,
    "model": "scrum",
    "type": "project",
    "lifetime": "",
    "budget": "",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "extend",
    "parent": 0,
    "path": ",12,",
    "grade": 1,
    "name": "修改项目",
    "code": "tt",
    "begin": "2021-11-26",
    "end": "2021-12-26",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 21,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-26T02:27:15Z",
    "openedVersion": "",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-26T02:33:18Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "admin",
    "QD": "",
    "RD": "",
    "team": "修改项目",
    "acl": "private",
    "whitelist": ",",
    "order": 60,
    "deleted": "0"
}
```

---

### DELETE /projects/:id - Delete Project

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 响应信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### POST /projects/:id/executions - Create Execution

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证 |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| project | int | Yes | 所属项目 |
| name | string | Yes | 执行名称 |
| code | string | Yes | 执行代号 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| days | int | No | 可用工作日 |
| lifetime | string | No | 类型(short 短期 | long 长期 | ops 运维) |
| PO | string | No | 产品负责人 |
| PM | string | No | 迭代负责人 |
| QD | string | No | 测试负责人 |
| RD | string | No | 发布负责人 |
| teamMembers | array | No | 团队成员 ["admin"] |
| desc | string | No | 迭代描述 |
| acl | string | No | 访问控制(private 私有 | open 继承项目权限) |
| whitelist | array | No | 白名单 |

**Request Example:**

```json
{"name": "测试执行1", "code": "test1", "begin": "2021-12-01", "end": "2021-12-11", "days": 10}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 执行ID |
| project | boolean | Yes | 所属项目 |
| name | string | Yes | 执行名称 |
| code | string | Yes | 执行代号 |
| days | int | Yes | 可用工作日 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| lifetime | string | Yes | 类型(short 短期 | long 长期 | ops 运维) |
| PO | 1 | No | 产品负责人 |
| PM | 1 | No | 迭代负责人 |
| QD | 1 | No | 测试负责人 |
| RD | 1 | No | 发布负责人 |
| teamMembers | array | Yes | 团队成员 ["admin"] |
| desc | string | Yes | 迭代描述 |
| acl | string | Yes | 访问控制(private 私有 | open 继承项目权限) |
| whitelist | array | Yes | 白名单，acl = private时生效 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 40,
    "project": 12,
    "model": "",
    "type": "sprint",
    "lifetime": "",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 12,
    "path": ",12,40,",
    "grade": 1,
    "name": "测试执行1",
    "code": "test1",
    "begin": "2021-12-01",
    "end": "2021-12-11",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 100,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-28T15:37:59Z",
    "openedVersion": "15.8",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-28T15:37:59Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "",
    "QD": "",
    "RD": "",
    "team": "测试执行1",
    "acl": "private",
    "whitelist": ",",
    "order": 200,
    "deleted": "0",
    "totalHours": 700,
    "totalEstimate": 0,
    "totalConsumed": 0,
    "totalLeft": 0
}
```

---

### GET /programs/:id - Get Program Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 项目集ID |
| name | string | Yes | 项目集名称 |
| PM | string | Yes | 负责人 |
| budget | int | Yes | 预算金额 |
| budgetUnit | string | Yes | 预算币种(CNY | USD) |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| realBegan | date | Yes | 实际开始日期 |
| realEnd | date | Yes | 实际结束日期 |
| desc | string | Yes | 项目集描述 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | Yes | 白名单 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| PM | 1 | No | 项目负责人 |

**Response Example:**

```json
{
    "id": 14,
    "project": 0,
    "model": "",
    "type": "program",
    "lifetime": "",
    "budget": "11111",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 0,
    "path": ",14,",
    "grade": 1,
    "name": "测试项目集",
    "code": "",
    "begin": "2021-11-26",
    "end": "2021-12-26",
    "realBegan": null,
    "realEnd": null,
    "days": 0,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-11-26T10:05:51Z",
    "openedVersion": "",
    "lastEditedBy": "",
    "lastEditedDate": null,
    "closedBy": null,
    "closedDate": null,
    "canceledBy": null,
    "canceledDate": null,
    "PO": null,
    "PM": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "QD": null,
    "RD": null,
    "team": "",
    "acl": "private",
    "whitelist": [],
    "order": 70,
    "deleted": false
}
```

---

### DELETE /programs/:id - Delete Program

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | success |

**Response Example:**

```json
{
    "message": "sucess"
}
```

---

### POST /programs - Create Program

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| name | string | No | 项目名称 |
| parent | string | No | 父项目集，0表示没有父项目集 |
| PM | string | No | 项目负责人 |
| budget | int | No | 预算金额 |
| budgetUnit | string | No | 预算币种(CNY | USD) |
| desc | string | No | 项目集描述 |
| begin | date | No | 预计开始日期 |
| end | date | No | 预计结束日期 |
| acl | string | No | 访问控制(open 公开 | private 私有) |
| whitelist | array | No | 白名单，只有acl = private才生效 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes |  |
| name | string | Yes | 项目名称 |
| budget | int | Yes | 预算金额 |
| budgetUnit | string | Yes | 预算币种(CNY | USD) |
| parent | int | Yes | 父项目集 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| realBegan | date | Yes | 实际开始日期 |
| realEnd | date | Yes | 实际结束日期 |
| desc | string | Yes | 项目集描述 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | string | Yes | 创建时间 |
| PM | 1 | No | 负责人 |
| acl | string | Yes | 访问控制(open 公开 | private 私有) |
| whitelist | array | Yes | 白名单 |

**Response Example:**

```json
{
    "id": 43,
    "project": 0,
    "model": "",
    "type": "program",
    "lifetime": "",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 0,
    "path": ",43,",
    "grade": 1,
    "name": "项目集21",
    "code": "",
    "begin": "2021-09-11",
    "end": "2021-12-31",
    "realBegan": null,
    "realEnd": null,
    "days": 0,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-12-03T02:07:36Z",
    "openedVersion": "",
    "lastEditedBy": "",
    "lastEditedDate": null,
    "closedBy": null,
    "closedDate": null,
    "canceledBy": null,
    "canceledDate": null,
    "PO": null,
    "PM": null,
    "QD": null,
    "RD": null,
    "team": "",
    "acl": "private",
    "whitelist": [
        {
            "id": 1,
            "account": "admin",
            "avatar": "",
            "realname": "管理员"
        }
    ],
    "order": 215,
    "deleted": false
}
```

---

### GET /projects/:id/stories - Get Project Story List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页面 |
| total | int | Yes | 需求总数 |
| limit | int | Yes | 每页需求数 |
| stories | array | Yes | 需求列表 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.module | int | Yes | 所属产品模块 |
|   └─ stories.fromBug | int | Yes | 来自于Bug |
|   └─ stories.source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
|   └─ stories.sourceNote | string | Yes | 来源备注 |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
|   └─ stories.pri | int | Yes | 优先级 |
|   └─ stories.estimate | int | Yes | 预计工时 |
|   └─ stories.status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
|   └─ stories.openedBy | 1 | Yes | 创建人 |
|   └─ stories.openedDate | datetime | Yes | 创建时间 |
|   └─ stories.toBug | int | Yes | 转为Bug |

**Response Example:**

```json
    "page": 1,
    "total": 1,
    "limit": 20,
    "stories": [
        {
            "id": 7,
            "parent": 0,
            "product": 1,
            "branch": 0,
            "module": 7,
            "plan": "1",
            "source": "po",
            "sourceNote": "",
            "fromBug": 0,
            "title": "关于我们的设计和开发",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 1,
            "estimate": 1,
            "status": "draft",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": "",
            "openedBy": "productManager",
            "openedDate": "2012-06-05T02:24:19Z",
            "assignedTo": "productManager",
            "assignedDate": "2012-06-05T02:24:19Z",
            "lastEditedBy": "",
            "lastEditedDate": null,
            "reviewedBy": "",
            "reviewedDate": null,
            "closedBy": "",
            "closedDate": null,
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": false,
            "planTitle": "1.0版本 "
        }
    ]
}
```

---

### PUT /executions/:id - Update Execution

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证 |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| project | int | Yes | 所属项目 |
| name | string | Yes | 执行名称 |
| code | string | Yes | 执行代号 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| days | int | No | 可用工作日 |
| lifetime | string | No | 类型(short 短期 | long 长期 | ops 运维) |
| PO | string | No | 产品负责人 |
| PM | string | No | 迭代负责人 |
| QD | string | No | 测试负责人 |
| RD | string | No | 发布负责人 |
| teamMembers | array | No | 团队成员 ["admin"] |
| desc | string | No | 迭代描述 |
| acl | string | No | 访问控制(private 私有 | open 继承项目权限) |
| whitelist | array | No | 白名单 |

**Request Example:**

```json
{"name": "测试执行1", "code": "test1", "begin": "2021-12-01", "end": "2021-12-11", "days": 10}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 执行ID |
| project | boolean | Yes | 所属项目 |
| name | string | Yes | 执行名称 |
| code | string | Yes | 执行代号 |
| days | int | Yes | 可用工作日 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| lifetime | string | Yes | 类型(short 短期 | long 长期 | ops 运维) |
| PO | string | No | 产品负责人 |
| PM | string | No | 迭代负责人 |
| QD | string | No | 测试负责人 |
| RD | string | No | 发布负责人 |
| teamMembers | array | Yes | 团队成员 ["admin"] |
| desc | string | Yes | 迭代描述 |
| acl | string | Yes | 访问控制(private 私有 | open 继承项目权限) |
| whitelist | array | Yes | 白名单，acl = private时生效 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 40,
    "project": 12,
    "model": "",
    "type": "sprint",
    "lifetime": "",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 12,
    "path": ",12,40,",
    "grade": 1,
    "name": "测试执行1",
    "code": "test1",
    "begin": "2021-12-01",
    "end": "2021-12-11",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 100,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-28T15:37:59Z",
    "openedVersion": "15.8",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-28T15:37:59Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "",
    "QD": "",
    "RD": "",
    "team": "测试执行1",
    "acl": "private",
    "whitelist": ",",
    "order": 200,
    "deleted": "0",
    "totalHours": 700,
    "totalEstimate": 0,
    "totalConsumed": 0,
    "totalLeft": 0
}
```

---

### POST /stories/:id/change - Change Story

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| title | string | No | 需求标题 |
| spec | string | No | 需求描述 |
| verify | string | No | 验收标准 |

**Request Example:**

```json
{
    "spec": "变更描述"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 需求ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属产品模块 |
| fromBug | int | Yes | 来自于Bug |
| source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
| sourceNote | string | Yes | 来源备注 |
| title | string | Yes | 需求标题 |
| category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
| stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| verify | string | Yes | 验收标准 |
| status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| toBug | int | Yes | 转为Bug |

**Response Example:**

```json
{
    "id": 1,
    "parent": 0,
    "product": 1,
    "branch": 0,
    "module": 1,
    "plan": "1",
    "source": "po",
    "sourceNote": "",
    "fromBug": 0,
    "title": "首页设计和开发",
    "keywords": "",
    "type": "story",
    "category": "feature",
    "pri": 1,
    "estimate": 1,
    "status": "active",
    "subStatus": "",
    "color": "",
    "stage": "developing",
    "stagedBy": "",
    "mailto": "",
    "openedBy": "productManager",
    "openedDate": "2012-06-05T02:09:49Z",
    "assignedTo": "productManager",
    "assignedDate": null,
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-29T01:43:18Z",
    "reviewedBy": "",
    "reviewedDate": null,
    "closedBy": "",
    "closedDate": null,
    "closedReason": "",
    "toBug": 0,
    "childStories": "",
    "linkStories": "",
    "duplicateStory": 0,
    "version": 2,
    "URChanged": "0",
    "deleted": "0",
    "spec": "变更描述",
    "verify": "开发并通过验收<br />",
    "executions": {
        "1": {
            "project": 1,
            "name": "企业网站第一期",
            "status": "doing"
        }
    },
    "tasks": {
        "1": [
            {
                "id": 11,
                "name": "首页页面的开发",
                "assignedTo": "dev1",
                "execution": 1,
                "status": "doing",
                "consumed": 0,
                "left": 8,
                "type": "devel"
            },
            {
                "id": 10,
                "name": "首页页面的设计",
                "assignedTo": "dev1",
                "execution": 1,
                "status": "done",
                "consumed": 8,
                "left": 0,
                "type": "design"
            }
        ]
    },
    "stages": [],
    "planTitle": {
        "1": "1.0版本"
    },
    "children": []
}
```

---

### GET /executions/:id - Get Execution Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 执行ID |
| project | int | Yes | 所属项目 |
| name | string | Yes | 执行名称 |
| code | string | Yes | 执行代号 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| days | int | No | 可用工作日 |
| lifetime | string | No | 类型(short 短期 | long 长期 | ops 运维) |
| PO | 1 | No | 产品负责人 |
| PM | 1 | No | 迭代负责人 |
| QD | 1 | No | 测试负责人 |
| RD | 1 | No | 发布负责人 |
| teamMembers | array | No | 团队成员 ["admin"] |
| desc | string | Yes | 迭代描述 |
| acl | string | Yes | 访问控制(private 私有 | open 继承项目权限) |
| whitelist | array | No | 白名单 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 40,
    "project": 12,
    "model": "",
    "type": "sprint",
    "lifetime": "",
    "budget": "0",
    "budgetUnit": "CNY",
    "attribute": "",
    "percent": 0,
    "milestone": "0",
    "output": "",
    "auth": "",
    "parent": 12,
    "path": ",12,40,",
    "grade": 1,
    "name": "测试执行1111111",
    "code": "test1111111",
    "begin": "2021-12-01",
    "end": "2021-12-11",
    "realBegan": "0000-00-00",
    "realEnd": "0000-00-00",
    "days": 100,
    "status": "wait",
    "subStatus": "",
    "pri": "1",
    "desc": "",
    "version": 0,
    "parentVersion": 0,
    "planDuration": 0,
    "realDuration": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-28T15:37:59Z",
    "openedVersion": "15.8",
    "lastEditedBy": "admin",
    "lastEditedDate": "2021-11-28T15:37:59Z",
    "closedBy": "",
    "closedDate": null,
    "canceledBy": "",
    "canceledDate": null,
    "PO": "",
    "PM": "",
    "QD": "",
    "RD": "",
    "team": "测试执行1111111",
    "acl": "private",
    "whitelist": ",",
    "order": 200,
    "deleted": "0",
    "totalHours": 700,
    "totalEstimate": 0,
    "totalConsumed": 0,
    "totalLeft": 0
}
```

---

### DELETE /executions/:id - Delete Execution

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 删除结果 |

**Response Example:**

```json
{
    ”message": "success"
}
```

---

### GET /products/:id/stories - Get Product Story List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页面 |
| total | int | Yes | 需求总数 |
| limit | int | Yes | 每页需求数 |
| stories | array | Yes | 需求列表 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.module | int | Yes | 所属产品模块 |
|   └─ stories.fromBug | int | Yes | 来自于Bug |
|   └─ stories.source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
|   └─ stories.sourceNote | string | Yes | 来源备注 |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
|   └─ stories.pri | int | Yes | 优先级 |
|   └─ stories.estimate | int | Yes | 预计工时 |
|   └─ stories.status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
|   └─ stories.openedBy | 1 | Yes | 创建人 |
|   └─ stories.openedDate | datetime | Yes | 创建时间 |
|   └─ stories.toBug | int | Yes | 转为Bug |

**Response Example:**

```json
    "page": 1,
    "total": 1,
    "limit": 20,
    "stories": [
        {
            "id": 7,
            "parent": 0,
            "product": 1,
            "branch": 0,
            "module": 7,
            "plan": "1",
            "source": "po",
            "sourceNote": "",
            "fromBug": 0,
            "title": "关于我们的设计和开发",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 1,
            "estimate": 1,
            "status": "draft",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": "",
            "openedBy": "productManager",
            "openedDate": "2012-06-05T02:24:19Z",
            "assignedTo": "productManager",
            "assignedDate": "2012-06-05T02:24:19Z",
            "lastEditedBy": "",
            "lastEditedDate": null,
            "reviewedBy": "",
            "reviewedDate": null,
            "closedBy": "",
            "closedDate": null,
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": false,
            "planTitle": "1.0版本 "
        }
    ]
}
```

---

### POST /stories - Create Story

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| title | string | Yes | 需求标题 |
| product | int | Yes | 所属产品 |
| pri | int | Yes | 优先级 |
| category | string | Yes | 需求类型 |
| spec | string | No | 需求描述 |
| verify | string | No | 验收标准 |
| source | string | No | 需求来源 |
| sourceNote | string | No | 来源备注 |
| estimate | float | No | 预计工时 |
| keywords | string | No | 关键词 |

**Request Example:**

```json
{
    "title": "测试需求",
    "spec": "测试",
    "product": 1,
    "pri": 1,
    "category": "feature"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 需求ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属产品模块 |
| fromBug | int | Yes | 来自于Bug |
| source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
| sourceNote | string | Yes | 来源备注 |
| title | string | Yes | 需求标题 |
| category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
| stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| verify | string | Yes | 验收标准 |
| status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| toBug | int | Yes | 转为Bug |

**Response Example:**

```json
{
    "id": 14,
    "parent": 0,
    "product": 1,
    "branch": 0,
    "module": 0,
    "plan": "",
    "source": "",
    "sourceNote": "",
    "fromBug": 0,
    "title": "测试需求",
    "keywords": "",
    "type": "story",
    "category": "feature",
    "pri": 1,
    "estimate": 0,
    "status": "active",
    "subStatus": "",
    "color": "",
    "stage": "wait",
    "stagedBy": "",
    "mailto": null,
    "openedBy": "admin",
    "openedDate": "2021-11-29T01:18:02Z",
    "assignedTo": "",
    "assignedDate": null,
    "lastEditedBy": "",
    "lastEditedDate": null,
    "reviewedBy": "",
    "reviewedDate": null,
    "closedBy": "",
    "closedDate": null,
    "closedReason": "",
    "toBug": 0,
    "childStories": "",
    "linkStories": "",
    "duplicateStory": 0,
    "version": 1,
    "URChanged": "0",
    "deleted": false,
    "spec": "测试",
    "verify": "",
    "executions": [],
    "tasks": [],
    "stages": [],
    "children": []
}
```

---

### GET /executions/:id/stories - Get Execution Story List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页面 |
| total | int | Yes | 需求总数 |
| limit | int | Yes | 每页需求数 |
| stories | array | Yes | 需求列表 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.module | int | Yes | 所属产品模块 |
|   └─ stories.fromBug | int | Yes | 来自于Bug |
|   └─ stories.source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
|   └─ stories.sourceNote | string | Yes | 来源备注 |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
|   └─ stories.pri | int | Yes | 优先级 |
|   └─ stories.estimate | int | Yes | 预计工时 |
|   └─ stories.status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
|   └─ stories.openedBy | 1 | Yes | 创建人 |
|   └─ stories.openedDate | datetime | Yes | 创建时间 |
|   └─ stories.toBug | int | Yes | 转为Bug |

**Response Example:**

```json
    "page": 1,
    "total": 1,
    "limit": 20,
    "stories": [
        {
            "id": 7,
            "parent": 0,
            "product": 1,
            "branch": 0,
            "module": 7,
            "plan": "1",
            "source": "po",
            "sourceNote": "",
            "fromBug": 0,
            "title": "关于我们的设计和开发",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 1,
            "estimate": 1,
            "status": "draft",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": "",
            "openedBy": "productManager",
            "openedDate": "2012-06-05T02:24:19Z",
            "assignedTo": "productManager",
            "assignedDate": "2012-06-05T02:24:19Z",
            "lastEditedBy": "",
            "lastEditedDate": null,
            "reviewedBy": "",
            "reviewedDate": null,
            "closedBy": "",
            "closedDate": null,
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": false,
            "planTitle": "1.0版本 "
        }
    ]
}
```

---

### GET /stories/:id - Get Story Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 需求ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属产品模块 |
| fromBug | int | Yes | 来自于Bug |
| source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
| sourceNote | string | Yes | 来源备注 |
| title | string | Yes | 需求标题 |
| category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
| stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| verify | string | Yes | 验收标准 |
| status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| toBug | int | Yes | 转为Bug |

**Response Example:**

```json
{
    "id": 14,
    "parent": 0,
    "product": 1,
    "branch": 0,
    "module": 0,
    "plan": "",
    "source": "",
    "sourceNote": "",
    "fromBug": 0,
    "title": "测试需求",
    "keywords": "",
    "type": "story",
    "category": "feature",
    "pri": 1,
    "estimate": 0,
    "status": "active",
    "subStatus": "",
    "color": "",
    "stage": "wait",
    "stagedBy": "",
    "mailto": null,
    "openedBy": "admin",
    "openedDate": "2021-11-29T01:18:02Z",
    "assignedTo": "",
    "assignedDate": null,
    "lastEditedBy": "",
    "lastEditedDate": null,
    "reviewedBy": "",
    "reviewedDate": null,
    "closedBy": "",
    "closedDate": null,
    "closedReason": "",
    "toBug": 0,
    "childStories": "",
    "linkStories": "",
    "duplicateStory": 0,
    "version": 1,
    "URChanged": "0",
    "deleted": false,
    "spec": "测试",
    "verify": "",
    "executions": [],
    "tasks": [],
    "stages": [],
    "children": []
}
```

---

### DELETE /stories/:id - Delete Story

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### GET /executions/:id/tasks - Get Execution Task List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | 任务总数 |
| limit | int | Yes | 每页任务数 |
| tasks | array | Yes | 任务列表 |
|   └─ tasks.id | int | Yes | 任务ID |
|   └─ tasks.project | int | Yes | 所属项目 |
|   └─ tasks.execution | int | Yes | 所属执行 |
|   └─ tasks.module | int | Yes | 所属模块 |
|   └─ tasks.story | int | Yes | 关联需求 |
|   └─ tasks.name | string | Yes | 任务名称 |
|   └─ tasks.type | string | Yes | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
|   └─ tasks.pri | int | Yes | 优先级 |
|   └─ tasks.estimate | float | Yes | 预计工时 |
|   └─ tasks.left | float | Yes | 剩余工时 |
|   └─ tasks.deadline | date | Yes | 截止日期 |
|   └─ tasks.consumed | float | Yes | 消耗工时 |
|   └─ tasks.status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已完成 | closed 已关闭 | cancel 已取消) |
|   └─ tasks.desc | string | Yes | 任务详情 |
|   └─ tasks.openedBy | 1 | Yes | 创建人 |
|   └─ tasks.openedDate | datetime | Yes | 创建时间 |
|   └─ tasks.assignedTo | 1 | Yes | 指派给 |
|   └─ tasks.estStarted | date | Yes | 预计开始日期 |
|   └─ tasks.realStarted | datetime | Yes | 实际开始时间 |
|   └─ tasks.finishedBy | 1 | No | 由谁完成 |
|   └─ tasks.finishedDate | datetime | No | 完成时间 |
|   └─ tasks.closedBy | 1 | No | 由谁关闭 |
|   └─ tasks.closedDate | datetime | No | 关闭时间 |
|   └─ tasks.mailto | array | No | 抄送给 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 100,
    "tasks": [
        {
            "id": 18,
            "project": 12,
            "parent": 0,
            "execution": 13,
            "module": 0,
            "design": 0,
            "story": 0,
            "storyVersion": 1,
            "designVersion": 0,
            "fromBug": 0,
            "name": "task1",
            "type": "devel",
            "pri": 3,
            "estimate": 0,
            "consumed": 2,
            "left": 0,
            "deadline": null,
            "status": "done",
            "subStatus": "",
            "color": "",
            "mailto": [],
            "desc": "",
            "version": 1,
            "openedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "openedDate": "2021-11-29T02:33:47Z",
            "assignedTo": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "assignedDate": "2021-11-29T02:52:25Z",
            "estStarted": "0000-00-00",
            "realStarted": "2021-11-29T02:50:00Z",
            "finishedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "finishedDate": "2021-11-29T02:52:17Z",
            "finishedList": "",
            "canceledBy": null,
            "canceledDate": null,
            "closedBy": null,
            "closedDate": null,
            "planDuration": 0,
            "realDuration": 0,
            "closedReason": "",
            "lastEditedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "lastEditedDate": "2021-11-29T02:52:25Z",
            "activatedDate": "0000-00-00",
            "deleted": false,
            "storyID": null,
            "storyTitle": null,
            "product": null,
            "branch": null,
            "latestStoryVersion": null,
            "storyStatus": null,
            "assignedToRealName": "管理员",
            "needConfirm": false,
            "progress": 100
        }
    ]
}
```

---

### PUT /stories/:id - Update Story Fields

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| module | int | No | 所属模块 |
| source | string | No | 来源 |
| sourceNote | string | No | 来源备注 |
| pri | int | No | 优先级 |
| category | string | No | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
| estimate | float | No | 预计工时 |
| keywords | string | No | 关键词 |

**Request Example:**

```json
{
    "category": "other"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 需求ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属产品模块 |
| fromBug | int | Yes | 来自于Bug |
| source | string | Yes | 需求来源(customer 客户 | user 用户 | po 产品经理 | market 市场) |
| sourceNote | string | Yes | 来源备注 |
| title | string | Yes | 需求标题 |
| category | string | Yes | 类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
| stage | string | Yes | 阶段(wait 未开始 | planned 已计划 | projected 已立项 | developing 研发中 | developed 研发完毕 | testing 测试中 | tested 测试完毕 | verified 已验收 | released 已发布 | closed 已关闭) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| verify | string | Yes | 验收标准 |
| status | string | Yes | 状态(draft 草稿 | active 激活 | closed 已关闭 | changed 已变更) |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| toBug | int | Yes | 转为Bug |

**Response Example:**

```json
{
    "id": 14,
    "parent": 0,
    "product": 1,
    "branch": 0,
    "module": 0,
    "plan": "",
    "source": "",
    "sourceNote": "",
    "fromBug": 0,
    "title": "测试需求",
    "keywords": "",
    "type": "story",
    "category": "feature",
    "pri": 1,
    "estimate": 0,
    "status": "active",
    "subStatus": "",
    "color": "",
    "stage": "wait",
    "stagedBy": "",
    "mailto": null,
    "openedBy": "admin",
    "openedDate": "2021-11-29T01:18:02Z",
    "assignedTo": "",
    "assignedDate": null,
    "lastEditedBy": "",
    "lastEditedDate": null,
    "reviewedBy": "",
    "reviewedDate": null,
    "closedBy": "",
    "closedDate": null,
    "closedReason": "",
    "toBug": 0,
    "childStories": "",
    "linkStories": "",
    "duplicateStory": 0,
    "version": 1,
    "URChanged": "0",
    "deleted": false,
    "spec": "测试",
    "verify": "",
    "executions": [],
    "tasks": [],
    "stages": [],
    "children": []
}
```

---

### GET /tasks/:id - Get Task Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 任务ID |
| project | int | Yes | 所属任务 |
| parent | int | Yes | 父任务 |
| execution | int | Yes | 所属执行 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 关联需求 |
| fromBug | int | Yes | 来源于Bug |
| name | string | Yes | 任务名称 |
| type | string | Yes | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| consumed | float | Yes | 消耗工时 |
| left | float | Yes | 剩余工时 |
| deadline | date | Yes | 预计结束日期 |
| status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已完成 | closed 已关闭 | cancel 已取消) |
| desc | string | Yes | 任务描述 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | datetime | Yes | 指派时间 |
| estStarted | date | Yes | 预计开始日期 |
| realStarted | datetime | No | 实际开始时间 |
| finishedBy | string | No | 由谁完成 |
| finishedDate | datetime | No | 完成时间 |
| closedBy | string | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |

**Response Example:**

```json
{
    "id": 22,
    "project": 41,
    "parent": 0,
    "execution": 42,
    "module": 0,
    "design": 0,
    "story": 0,
    "storyVersion": 1,
    "designVersion": 0,
    "fromBug": 0,
    "name": "多人任务",
    "type": "devel",
    "pri": 3,
    "estimate": 2,
    "consumed": 0,
    "left": 2,
    "deadline": "2021-12-23",
    "status": "wait",
    "subStatus": "",
    "color": "",
    "mailto": [],
    "desc": "",
    "version": 1,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-12-05T12:00:57Z",
    "assignedTo": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "assignedDate": "2021-12-05T12:00:57Z",
    "estStarted": "2021-12-05",
    "realStarted": null,
    "finishedBy": null,
    "finishedDate": null,
    "finishedList": "",
    "canceledBy": null,
    "canceledDate": null,
    "closedBy": null,
    "closedDate": null,
    "planDuration": 0,
    "realDuration": 0,
    "closedReason": "",
    "lastEditedBy": null,
    "lastEditedDate": null,
    "activatedDate": "",
    "deleted": false,
    "storyID": null,
    "storyTitle": null,
    "latestStoryVersion": null,
    "storyStatus": null,
    "assignedToRealName": "管理员",
    "children": [],
    "team": [
        {
            "id": 50,
            "root": 22,
            "type": "task",
            "account": "admin",
            "role": "",
            "limited": "no",
            "join": "2021-12-05",
            "days": 0,
            "hours": 0,
            "estimate": 1,
            "consumed": 0,
            "left": 1,
            "order": 0,
            "realname": "管理员",
            "avatar": "",
            "progress": 0
        },
        {
            "id": 51,
            "root": 22,
            "type": "task",
            "account": "productManager",
            "role": "",
            "limited": "no",
            "join": "2021-12-05",
            "days": 0,
            "hours": 0,
            "estimate": 1,
            "consumed": 0,
            "left": 1,
            "order": 1,
            "realname": "产品经理",
            "avatar": "",
            "progress": 0
        }
    ],
    "files": [],
    "needConfirm": false,
    "progress": 0,
    "storySpec": "",
    "storyVerify": "",
    "storyFiles": [],
    "executionName": "testt",
    "moduleTitle": "/",
    "actions": [
        {
            "id": 1253748,
            "objectType": "task",
            "objectID": 22,
            "product": ",4,",
            "project": 41,
            "execution": 42,
            "actor": "管理员",
            "action": "opened",
            "date": "2021-12-05 20:00:57",
            "comment": "",
            "extra": "",
            "read": "1",
            "history": [],
            "desc": "2021-12-05 20:00:57, 由 <strong>管理员</strong> 创建。\n"
        }
    ],
    "preAndNext": {
        "pre": "",
        "next": ""
    }
}
```

---

### POST /executions/:id/tasks - Create Task

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| module | int | No | 所属模块 |
| story | int | No | 关联需求 |
| fromBug | int | No | 来自于Bug |
| name | string | Yes | 任务名称 |
| type | string | Yes | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
| assignedTo | array | Yes | 指派给 |
| pri | int | No | 优先级 |
| estimate | float | No | 预计工时 |
| estStarted | date | Yes | 预计开始日期 |
| deadline | date | Yes | 预计结束日期 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Request Example:**

```json
{
    "name": "testtt",
    "assignedTo": [ "admin" ],
    "type": "devel",
    "estStarted": "2021-12-01",
    "deadline": "2021-12-31"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 任务ID |
| project | int | Yes | 所属任务 |
| parent | int | Yes | 父任务 |
| execution | int | Yes | 所属执行 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 关联需求 |
| fromBug | int | Yes | 来源于Bug |
| name | string | Yes | 任务名称 |
| type | string | Yes | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| consumed | float | Yes | 消耗工时 |
| left | float | Yes | 剩余工时 |
| deadline | date | Yes | 预计结束日期 |
| status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已完成 | closed 已关闭 | cancel 已取消) |
| desc | string | Yes | 任务描述 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| assignedTo | 1 | Yes | 指派给 |
| assignedDate | datetime | Yes | 指派时间 |
| estStarted | date | Yes | 预计开始日期 |
| realStarted | datetime | No | 实际开始时间 |
| finishedBy | string | No | 由谁完成 |
| finishedDate | datetime | No | 完成时间 |
| closedBy | 1 | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |
| team | array | Yes | 团队，应用于多人任务 |

**Response Example:**

```json
{
    "id": 23,
    "project": 12,
    "parent": 0,
    "execution": 55,
    "module": 0,
    "design": 0,
    "story": 0,
    "storyVersion": 1,
    "designVersion": 0,
    "fromBug": 0,
    "name": "testttt",
    "type": "devel",
    "pri": 0,
    "estimate": 0,
    "consumed": 0,
    "left": 0,
    "deadline": "2021-12-31",
    "status": "wait",
    "subStatus": "",
    "color": "",
    "mailto": null,
    "desc": "",
    "version": 1,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-12-05T12:54:30Z",
    "assignedTo": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "assignedDate": "2021-12-05T12:54:30Z",
    "estStarted": "2021-12-01",
    "realStarted": null,
    "finishedBy": null,
    "finishedDate": null,
    "finishedList": "",
    "canceledBy": null,
    "canceledDate": null,
    "closedBy": null,
    "closedDate": null,
    "planDuration": 0,
    "realDuration": 0,
    "closedReason": "",
    "lastEditedBy": null,
    "lastEditedDate": null,
    "activatedDate": "",
    "deleted": false,
    "storyID": null,
    "storyTitle": null,
    "latestStoryVersion": null,
    "storyStatus": null,
    "assignedToRealName": "管理员",
    "children": [],
    "team": [],
    "files": [],
    "needConfirm": false,
    "progress": 0
}
```

---

### DELETE /tasks/:id - Delete Task

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    “message”: "success"
}
```

---

### GET /products/:id/bugs - Get Product Bug List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | Bug总数 |
| limit | int | Yes | 每页Bug数 |
| bugs | array | Yes | Bug列表 |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 所属产品 |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.project | int | Yes | 所属项目 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.toTask | int | Yes | 转为任务 |
|   └─ bugs.toStory | int | Yes | 转为需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.keywords | string | Yes | 关键字 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | 优先级 |
|   └─ bugs.type | string | Yes | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
|   └─ bugs.os | string | No | 操作系统 |
|   └─ bugs.browser | string | No | 浏览器 |
|   └─ bugs.steps | string | Yes | 重现步骤 |
|   └─ bugs.task | int | No | 相关任务 |
|   └─ bugs.story | int | No | 相关需求 |
|   └─ bugs.openedBy | 1 | Yes | 创建人 |
|   └─ bugs.openedDate | datetime | Yes | 创建时间 |
|   └─ bugs.deadline | date | No | 截止日期 |
|   └─ bugs.assignedTo | 1 | No | 指派给 |
|   └─ bugs.assignedDate | datetime | No | 指派时间 |
|   └─ bugs.resolvedBy | 1 | No | 由谁解决 |
|   └─ bugs.resolvedDate | datetime | No | 解决时间 |
|   └─ bugs.resolvedBuild | string | No | 解决版本 |
|   └─ bugs.closedBy | 1 | No | 由谁关闭 |
|   └─ bugs.closedDate | datetime | No | 关闭时间 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "bugs": [
        {
            "id": 9,
            "project": 0,
            "product": 4,
            "branch": 0,
            "module": 0,
            "execution": 0,
            "plan": 0,
            "story": 0,
            "storyVersion": 1,
            "task": 0,
            "toTask": 0,
            "toStory": 0,
            "title": "Bug3",
            "keywords": "",
            "severity": 3,
            "pri": 0,
            "type": "",
            "os": "",
            "browser": "",
            "hardware": "",
            "found": "",
            "steps": "",
            "status": {
                "code": "active",
                "name": "激活"
            },
            "subStatus": "",
            "color": "",
            "confirmed": 0,
            "activatedCount": 0,
            "activatedDate": "1969-12-31T16:00:00Z",
            "feedbackBy": "",
            "notifyEmail": "",
            "mailto": null,
            "openedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "openedDate": "2021-12-01T01:25:42Z",
            "openedBuild": "主干",
            "assignedTo": null,
            "assignedDate": "1969-12-31T16:00:00Z",
            "deadline": "1970-01-01",
            "resolvedBy": null,
            "resolution": "",
            "resolvedBuild": "",
            "resolvedDate": "1969-12-31T16:00:00Z",
            "closedBy": null,
            "closedDate": "1969-12-31T16:00:00Z",
            "duplicateBug": 0,
            "linkBug": "",
            "case": 0,
            "caseVersion": 1,
            "result": 0,
            "repo": 0,
            "entry": "",
            "lines": "",
            "v1": "",
            "v2": "",
            "repoType": "",
            "testtask": 0,
            "lastEditedBy": null,
            "lastEditedDate": "1969-12-31T16:00:00Z",
            "deleted": false,
            "needconfirm": false
        }
    ]
}
```

---

### PUT /tasks/:id - Update Task

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| module | int | No | 所属模块 |
| story | int | No | 关联需求 |
| fromBug | int | No | 来自于Bug |
| name | string | No | 任务名称 |
| type | string | No | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
| assignedTo | array | No | 指派给，["admin"] |
| pri | int | No | 优先级 |
| estimate | float | No | 预计工时 |
| estStarted | date | No | 预计开始日期 |
| deadline | date | No | 预计结束日期 |

**Request Example:**

```json
{
    "name": "testtt",
    "assignedTo": [ "admin" ],
    "type": "devel",
    "estStarted": "2021-12-01",
    "deadline": "2021-12-31"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 任务ID |
| project | int | Yes | 所属任务 |
| parent | int | Yes | 父任务 |
| execution | int | Yes | 所属执行 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 关联需求 |
| fromBug | int | Yes | 来源于Bug |
| name | string | Yes | 任务名称 |
| type | string | Yes | 任务类型(design 设计 | devel 开发 | request 需求 | test 测试 | study 研究 | discuss 讨论 | ui 界面 | affair 事务 | misc 其他) |
| pri | int | Yes | 优先级 |
| estimate | float | Yes | 预计工时 |
| consumed | float | Yes | 消耗工时 |
| left | float | Yes | 剩余工时 |
| deadline | date | Yes | 预计结束日期 |
| status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已完成 | closed 已关闭 | cancel 已取消) |
| desc | string | Yes | 任务描述 |
| openedBy | 1 | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| assignedTo | 1 | Yes | 指派给 |
| assignedDate | datetime | Yes | 指派时间 |
| estStarted | date | Yes | 预计开始日期 |
| realStarted | datetime | No | 实际开始时间 |
| finishedBy | 1 | No | 由谁完成 |
| finishedDate | datetime | No | 完成时间 |
| closedBy | 1 | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |

**Response Example:**

```json
{
    "id": 13,
    "project": 7,
    "parent": 0,
    "execution": 1,
    "module": 0,
    "design": 0,
    "story": 2,
    "storyVersion": 1,
    "designVersion": 0,
    "fromBug": 0,
    "name": "ccc",
    "type": "devel",
    "pri": 1,
    "estimate": 10,
    "consumed": 0,
    "left": 10,
    "deadline": null,
    "status": "wait",
    "subStatus": "",
    "color": "",
    "mailto": null,
    "desc": "新闻中心的开发",
    "version": 2,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-04-28T05:16:15Z",
    "assignedTo": {
        "id": 4,
        "account": "dev1",
        "avatar": "",
        "realname": "开发甲"
    },
    "assignedDate": "2021-04-28T05:16:15Z",
    "estStarted": "",
    "realStarted": null,
    "finishedBy": null,
    "finishedDate": null,
    "finishedList": "",
    "canceledBy": null,
    "canceledDate": null,
    "closedBy": null,
    "closedDate": null,
    "planDuration": 0,
    "realDuration": 0,
    "closedReason": "",
    "lastEditedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "lastEditedDate": "2021-12-05T12:57:10Z",
    "activatedDate": "",
    "deleted": false,
    "storyID": 2,
    "storyTitle": "新闻中心的设计和开发。",
    "latestStoryVersion": 1,
    "storyStatus": "active",
    "assignedToRealName": "开发甲",
    "children": [],
    "team": [],
    "files": [],
    "cases": {
        "3": "新闻中心的测试用例"
    },
    "needConfirm": false,
    "progress": 0
}
```

---

### POST /products/:id/bugs - Create Bug

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 7 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| module | int | No | 所属模块 |
| execution | int | No | 所属执行 |
| title | string | Yes | Bug标题 |
| keywords | string | No | 关键词 |
| severity | int | Yes | 严重程度 |
| pri | int | Yes | 优先级 |
| type | string | Yes | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
| os | string | No | 操作系统 |
| browser | string | No | 浏览器 |
| steps | string | No | 重现步骤 |
| task | int | No | 相关任务 |
| story | int | No | 相关需求 |
| deadline | date | No | 截止日期 |
| openedBuild | array | No | 影响版本 |

**Request Example:**

```json
{
    "title": "Bug2",
    "severity": 1,
    "pri": 1,
    "steps": "",
    "type": "codeerror",
    "openedBuild": [
        "trunk"
    ]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | Bug ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| project | int | Yes | 所属项目 |
| execution | int | Yes | 所属执行 |
| toTask | boolean | No | 转为任务 |
| toStory | boolean | No | 转为需求 |
| title | string | Yes | Bug标题 |
| keywords | string | No | 关键字 |
| severity | int | Yes | 严重程度 |
| pri | int | Yes | 优先级 |
| type | string | No | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
| os | string | No | 操作系统 |
| browser | string | No | 浏览器 |
| steps | string | No | 重现步骤 |
| task | int | No | 相关任务 |
| story | int | No | 相关需求 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| deadline | date | No | 截止日期 |
| assignedTo | 1 | No | 指派给 |
| assignedDate | datetime | No | 指派时间 |
| resolvedBy | 1 | No | 由谁解决 |
| resolvedDate | datetime | No | 解决时间 |
| resolvedBuild | string | No | 解决版本 |
| closedBy | 1 | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |
| status | string | Yes | 状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 1,
    "project": 7,
    "product": 1,
    "branch": 0,
    "module": 0,
    "execution": 1,
    "plan": 0,
    "story": 1,
    "storyVersion": 1,
    "task": 1,
    "toTask": 0,
    "toStory": 0,
    "title": "aaa",
    "keywords": "",
    "severity": 3,
    "pri": 1,
    "type": "codeerror",
    "os": "",
    "browser": "",
    "hardware": "",
    "found": "",
    "steps": "<p>[步骤]进入首页</p>\r\n<p>[结果]出现乱码&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n<p>[期望]正常显示</p>",
    "status": "active",
    "subStatus": "",
    "color": "",
    "confirmed": 0,
    "activatedCount": 0,
    "activatedDate": "1969-12-31T16:00:00Z",
    "feedbackBy": "",
    "notifyEmail": "",
    "mailto": [],
    "openedBy": {
        "id": 7,
        "account": "tester1",
        "avatar": "",
        "realname": "测试甲"
    },
    "openedDate": "2012-06-05T02:56:11Z",
    "openedBuild": "trunk",
    "assignedTo": {
        "id": 4,
        "account": "dev1",
        "avatar": "",
        "realname": "开发甲"
    },
    "assignedDate": "1969-12-31T16:00:00Z",
    "deadline": null,
    "resolvedBy": null,
    "resolution": "",
    "resolvedBuild": "",
    "resolvedDate": null,
    "closedBy": null,
    "closedDate": "1969-12-31T16:00:00Z",
    "duplicateBug": 0,
    "linkBug": "",
    "case": 0,
    "caseVersion": 1,
    "result": 0,
    "repo": 0,
    "entry": "",
    "lines": "",
    "v1": "",
    "v2": "",
    "repoType": "",
    "testtask": 0,
    "lastEditedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "lastEditedDate": "2021-12-05T14:53:35Z",
    "deleted": false,
    "executionName": "企业网站第一期",
    "storyTitle": "首页设计和开发",
    "storyStatus": "active",
    "latestStoryVersion": 2,
    "taskName": null,
    "planName": null,
    "projectName": "企业管理系统",
    "toCases": [],
    "files": []
}
```

---

### PUT /bugs/:id - Update Bug

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| module | int | No | 所属模块 |
| execution | int | No | 所属执行 |
| title | string | Yes | Bug标题 |
| keywords | string | No | 关键词 |
| severity | int | Yes | 严重程度 |
| pri | int | Yes | 优先级 |
| type | string | Yes | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
| os | string | No | 操作系统 |
| browser | string | No | 浏览器 |
| steps | string | No | 重现步骤 |
| task | int | No | 相关任务 |
| story | int | No | 相关需求 |
| deadline | date | No | 截止日期 |
| openedBuild | array | No | 影响版本 |

**Request Example:**

```json
{
    "title": "Bug2",
    "severity": 1,
    "pri": 1,
    "steps": "",
    "type": "codeerror",
    "openedBuild": [
        "trunk"
    ]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | Bug ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| project | int | Yes | 所属项目 |
| execution | int | Yes | 所属执行 |
| toTask | boolean | No | 转为任务 |
| toStory | boolean | No | 转为需求 |
| title | string | Yes | Bug标题 |
| keywords | string | No | 关键字 |
| severity | int | Yes | 严重程度 |
| pri | int | Yes | 优先级 |
| type | string | No | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
| os | string | No | 操作系统 |
| browser | string | No | 浏览器 |
| steps | string | No | 重现步骤 |
| task | int | No | 相关任务 |
| story | int | No | 相关需求 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| deadline | date | No | 截止日期 |
| assignedTo | 1 | No | 指派给 |
| assignedDate | datetime | No | 指派时间 |
| resolvedBy | 1 | No | 由谁解决 |
| resolvedDate | datetime | No | 解决时间 |
| resolvedBuild | string | No | 解决版本 |
| closedBy | 1 | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |
| status | string | Yes | 状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 1,
    "project": 7,
    "product": 1,
    "branch": 0,
    "module": 0,
    "execution": 1,
    "plan": 0,
    "story": 1,
    "storyVersion": 1,
    "task": 1,
    "toTask": 0,
    "toStory": 0,
    "title": "aaa",
    "keywords": "",
    "severity": 3,
    "pri": 1,
    "type": "codeerror",
    "os": "",
    "browser": "",
    "hardware": "",
    "found": "",
    "steps": "<p>[步骤]进入首页</p>\r\n<p>[结果]出现乱码&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n<p>[期望]正常显示</p>",
    "status": "active",
    "subStatus": "",
    "color": "",
    "confirmed": 0,
    "activatedCount": 0,
    "activatedDate": "1969-12-31T16:00:00Z",
    "feedbackBy": "",
    "notifyEmail": "",
    "mailto": [],
    "openedBy": {
        "id": 7,
        "account": "tester1",
        "avatar": "",
        "realname": "测试甲"
    },
    "openedDate": "2012-06-05T02:56:11Z",
    "openedBuild": "trunk",
    "assignedTo": {
        "id": 4,
        "account": "dev1",
        "avatar": "",
        "realname": "开发甲"
    },
    "assignedDate": "1969-12-31T16:00:00Z",
    "deadline": null,
    "resolvedBy": null,
    "resolution": "",
    "resolvedBuild": "",
    "resolvedDate": null,
    "closedBy": null,
    "closedDate": "1969-12-31T16:00:00Z",
    "duplicateBug": 0,
    "linkBug": "",
    "case": 0,
    "caseVersion": 1,
    "result": 0,
    "repo": 0,
    "entry": "",
    "lines": "",
    "v1": "",
    "v2": "",
    "repoType": "",
    "testtask": 0,
    "lastEditedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "lastEditedDate": "2021-12-05T14:53:35Z",
    "deleted": false,
    "executionName": "企业网站第一期",
    "storyTitle": "首页设计和开发",
    "storyStatus": "active",
    "latestStoryVersion": 2,
    "taskName": null,
    "planName": null,
    "projectName": "企业管理系统",
    "toCases": [],
    "files": []
}
```

---

### GET /bugs/:id - Get Bug Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | Bug ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| project | int | Yes | 所属项目 |
| execution | int | Yes | 所属执行 |
| toTask | boolean | No | 转为任务 |
| toStory | boolean | No | 转为需求 |
| title | string | Yes | Bug标题 |
| keywords | string | No | 关键字 |
| severity | int | Yes | 严重程度 |
| pri | int | Yes | 优先级 |
| type | string | No | Bug类型(codeerror 代码错误 | config 配置相关 | install 安装部署 | security 安全相关 | performance 性能问题 | standard 标准规范 | automation |测试脚本 | designdefect 设计缺陷 | others 其他) |
| os | string | No | 操作系统 |
| browser | string | No | 浏览器 |
| steps | string | No | 重现步骤 |
| task | int | No | 相关任务 |
| story | int | No | 相关需求 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| deadline | date | No | 截止日期 |
| assignedTo | 1 | No | 指派给 |
| assignedDate | datetime | No | 指派时间 |
| resolvedBy | 1 | No | 由谁解决 |
| resolvedDate | datetime | No | 解决时间 |
| resolvedBuild | string | No | 解决版本 |
| closedBy | 1 | No | 由谁关闭 |
| closedDate | datetime | No | 关闭时间 |
| status | string | Yes | 状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 1,
    "project": 7,
    "product": 1,
    "branch": 0,
    "module": 0,
    "execution": 1,
    "plan": 0,
    "story": 1,
    "storyVersion": 1,
    "task": 1,
    "toTask": 0,
    "toStory": 0,
    "title": "aaa",
    "keywords": "",
    "severity": 3,
    "pri": 1,
    "type": "codeerror",
    "os": "",
    "browser": "",
    "hardware": "",
    "found": "",
    "steps": "<p>[步骤]进入首页</p>\r\n<p>[结果]出现乱码&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n<p>[期望]正常显示</p>",
    "status": "active",
    "subStatus": "",
    "color": "",
    "confirmed": 0,
    "activatedCount": 0,
    "activatedDate": "1969-12-31T16:00:00Z",
    "feedbackBy": "",
    "notifyEmail": "",
    "mailto": [],
    "openedBy": {
        "id": 7,
        "account": "tester1",
        "avatar": "",
        "realname": "测试甲"
    },
    "openedDate": "2012-06-05T02:56:11Z",
    "openedBuild": "trunk",
    "assignedTo": {
        "id": 4,
        "account": "dev1",
        "avatar": "",
        "realname": "开发甲"
    },
    "assignedDate": "1969-12-31T16:00:00Z",
    "deadline": null,
    "resolvedBy": null,
    "resolution": "",
    "resolvedBuild": "",
    "resolvedDate": null,
    "closedBy": null,
    "closedDate": "1969-12-31T16:00:00Z",
    "duplicateBug": 0,
    "linkBug": "",
    "case": 0,
    "caseVersion": 1,
    "result": 0,
    "repo": 0,
    "entry": "",
    "lines": "",
    "v1": "",
    "v2": "",
    "repoType": "",
    "testtask": 0,
    "lastEditedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "lastEditedDate": "2021-12-05T14:53:35Z",
    "deleted": false,
    "executionName": "企业网站第一期",
    "storyTitle": "首页设计和开发",
    "storyStatus": "active",
    "latestStoryVersion": 2,
    "taskName": null,
    "planName": null,
    "projectName": "企业管理系统",
    "toCases": [],
    "files": []
}
```

---

### DELETE /bugs/:id - Delete Bug

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### GET /products/:id/testcases - Get Product Test Case List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | 用例总数 |
| limit | int | Yes | 每页用例数 |
| testcases | array | Yes | 用例列表 |
|   └─ testcases.id | int | Yes | 用例ID |
|   └─ testcases.product | int | Yes | 所属产品 |
|   └─ testcases.branch | int | No | 所属分支 |
|   └─ testcases.module | int | No | 所有模块 |
|   └─ testcases.story | int | No | 相关研发需求 |
|   └─ testcases.storyVersion | int | No | 需求版本 |
|   └─ testcases.title | string | No | 用例标题 |
|   └─ testcases.precondition | string | No | 前置条件 |
|   └─ testcases.keywords | string | No | 关键词 |
|   └─ testcases.pri | int | Yes | 优先级 |
|   └─ testcases.type | string | Yes | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
|   └─ testcases.stage | string | Yes | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
|   └─ testcases.status | string | Yes | 状态(wait 待评审 | normal 正常 | blocked 被阻塞 | investigate 研究中) |
|   └─ testcases.openedBy | 1 | Yes | 创建人 |
|   └─ testcases.openedDate | datetime | Yes | 创建时间 |
|   └─ testcases.fromBug | int | No | 来自于Bug |
|   └─ testcases.fromCaseID | int | No | 来自于用例 |

**Response Example:**

```json
{
    "page": 1,
    "total": 6,
    "limit": 20,
    "testcases": [
        {
            "id": 10,
            "project": 0,
            "product": 1,
            "execution": 0,
            "branch": 0,
            "lib": 0,
            "module": 0,
            "path": 0,
            "story": 0,
            "storyVersion": 1,
            "title": "case1",
            "precondition": "",
            "keywords": "",
            "pri": 1,
            "type": "feature",
            "auto": "no",
            "frame": "",
            "stage": "",
            "howRun": "",
            "scriptedBy": "",
            "scriptedDate": null,
            "scriptStatus": "",
            "scriptLocation": "",
            "status": "normal",
            "subStatus": "",
            "color": "",
            "frequency": "1",
            "order": 0,
            "openedBy": {
                "id": 1,
                "account": "admin",
                "avatar": "",
                "realname": "管理员"
            },
            "openedDate": "2021-12-05T15:05:16Z",
            "reviewedBy": null,
            "reviewedDate": null,
            "lastEditedBy": null,
            "lastEditedDate": null,
            "version": 1,
            "linkCase": "",
            "fromBug": 0,
            "fromCaseID": 0,
            "fromCaseVersion": 1,
            "deleted": false,
            "lastRunner": "",
            "lastRunDate": null,
            "lastRunResult": "",
            "storyTitle": null,
            "needconfirm": false,
            "bugs": 0,
            "results": 0,
            "caseFails": 0,
            "stepNumber": 1,
            "statusName": "正常"
        }
    ]
}
```

---

### POST /products/:id/testcases - Create Test Case

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| module | int | No | 所属模块 |
| story | int | No | 所属需求 |
| title | string | Yes | 用例标题 |
| type | string | Yes | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
| stage | string | No | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
| precondition | string | No | 前置条件 |
| pri | int | No | 优先级 |
| steps | array | Yes | 用例步骤 |
| keywords | string | No | 关键词 |

**Request Example:**

```json
{
    "title": "case1",
    "pri": 1,
    "steps": [
        {
            "desc": "步骤1",
            "expect": "结果1"
        }
    ],
    "type": "feature"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用例ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 相关需求 |
| storyVersion | int | Yes | 需求版本 |
| title | string | Yes | 需求标题 |
| precondition | string | Yes | 前置条件 |
| pri | int | Yes | 优先级 |
| type | string | Yes | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
| stage | string | Yes | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
| steps | array | Yes | 用例步骤列表 |
|   └─ steps.desc | string | Yes | 步骤 |
|   └─ steps.expect | string | Yes | 期望 |
| fromBug | int | No | 来自于Bug |
| fromCaseID | int | No | 来自于用例 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 8,
    "project": 0,
    "product": 1,
    "execution": 0,
    "branch": 0,
    "lib": 0,
    "module": 0,
    "path": 0,
    "story": 0,
    "storyVersion": 1,
    "title": "case1",
    "precondition": "",
    "keywords": "",
    "pri": 1,
    "type": "feature",
    "auto": "no",
    "frame": "",
    "stage": "",
    "howRun": "",
    "scriptedBy": "",
    "scriptedDate": null,
    "scriptStatus": "",
    "scriptLocation": "",
    "status": "normal",
    "subStatus": "",
    "color": "",
    "frequency": "1",
    "order": 0,
    "openedBy": "admin",
    "openedDate": "2021-11-29T07:18:29Z",
    "reviewedBy": "",
    "reviewedDate": null,
    "lastEditedBy": "",
    "lastEditedDate": null,
    "version": 1,
    "linkCase": "",
    "fromBug": 0,
    "fromCaseID": 0,
    "fromCaseVersion": 1,
    "deleted": false,
    "lastRunner": "",
    "lastRunDate": null,
    "lastRunResult": "",
    "toBugs": [],
    "steps": [
        {
            "id": 5,
            "parent": 0,
            "case": 8,
            "version": 1,
            "type": "step",
            "desc": "步骤1",
            "expect": "结果1"
        }
    ],
    "files": [],
    "currentVersion": 1
}
```

---

### POST /products/:id/plans - Create Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 4 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| title | string | Yes | 计划名称 |
| begin | date | No | 计划开始日期 |
| end | date | No | 计划结束日期 |
| desc | string | No | 计划描述 |
| parent | int | No | 所属父计划 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 2,
    "product": 4,
    "branch": 0,
    "parent": 0,
    "title": "主干计划",
    "desc": "",
    "begin": "2021-11-23",
    "end": "2021-11-29",
    "order": "",
    "deleted": false,
    "stories": [
        {
            "story": 12,
            "plan": "2",
            "order": 1,
            "id": 12,
            "parent": 0,
            "product": 4,
            "branch": 0,
            "module": 23,
            "source": "",
            "sourceNote": "",
            "fromBug": 0,
            "title": "主干需求",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 0,
            "estimate": 0,
            "status": "active",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": null,
            "openedBy": "admin",
            "openedDate": "2021-11-23 16:04:30",
            "assignedTo": "admin",
            "assignedDate": "2021-11-23 19:42:55",
            "lastEditedBy": "admin",
            "lastEditedDate": "2021-11-23 19:42:55",
            "reviewedBy": "",
            "reviewedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": "0"
        }
    ],
    "bugs": [
        {
            "id": 5,
            "project": 0,
            "product": 4,
            "branch": 1,
            "module": 24,
            "execution": 0,
            "plan": 2,
            "story": 0,
            "storyVersion": 1,
            "task": 0,
            "toTask": 0,
            "toStory": 0,
            "title": "Bug1",
            "keywords": "",
            "severity": 3,
            "pri": 3,
            "type": "codeerror",
            "os": "",
            "browser": "",
            "hardware": "",
            "found": "",
            "steps": "<p>[步骤]</p><br /><p>[结果]</p><br /><p>[期望]</p><br />",
            "status": "active",
            "subStatus": "",
            "color": "",
            "confirmed": 0,
            "activatedCount": 0,
            "activatedDate": "0000-00-00 00:00:00",
            "mailto": "",
            "openedBy": "admin",
            "openedDate": "2021-11-29 13:02:34",
            "openedBuild": "trunk",
            "assignedTo": "",
            "assignedDate": "0000-00-00 00:00:00",
            "deadline": "2021-11-29",
            "resolvedBy": "",
            "resolution": "",
            "resolvedBuild": "",
            "resolvedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "duplicateBug": 0,
            "linkBug": "",
            "case": 0,
            "caseVersion": 0,
            "result": 0,
            "repo": 0,
            "entry": "",
            "lines": "",
            "v1": "",
            "v2": "",
            "repoType": "",
            "testtask": 0,
            "lastEditedBy": "",
            "lastEditedDate": "0000-00-00 00:00:00",
            "deleted": "0"
        }
    ]
}
```

---

### GET /testcases/:id - Get Test Case Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用例ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 相关需求 |
| storyVersion | int | Yes | 需求版本 |
| title | string | Yes | 需求标题 |
| precondition | string | Yes | 前置条件 |
| pri | int | Yes | 优先级 |
| type | string | Yes | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
| stage | string | Yes | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
| steps | array | Yes | 用例步骤列表 |
|   └─ steps.desc | string | Yes | 步骤 |
|   └─ steps.expect | string | Yes | 期望 |
| fromBug | int | No | 来自于Bug |
| fromCaseID | int | No | 来自于用例 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |
| status | string | No | 状态(wait 待评审 | normal 正常 | blocked 被阻塞 | investigate 研究中) |

**Response Example:**

```json
{
    "id": 9,
    "project": 0,
    "product": 1,
    "execution": 0,
    "branch": 0,
    "lib": 0,
    "module": 0,
    "path": 0,
    "story": 0,
    "storyVersion": 1,
    "title": "case1",
    "precondition": "",
    "keywords": "",
    "pri": 1,
    "type": "feature",
    "auto": "no",
    "frame": "",
    "stage": "",
    "howRun": "",
    "scriptedBy": "",
    "scriptedDate": null,
    "scriptStatus": "",
    "scriptLocation": "",
    "status": "normal",
    "subStatus": "",
    "color": "",
    "frequency": "1",
    "order": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-11-29T07:24:42Z",
    "reviewedBy": null,
    "reviewedDate": null,
    "lastEditedBy": null,
    "lastEditedDate": null,
    "version": 1,
    "linkCase": "",
    "fromBug": 0,
    "fromCaseID": 0,
    "fromCaseVersion": 1,
    "deleted": false,
    "lastRunner": "",
    "lastRunDate": null,
    "lastRunResult": "",
    "toBugs": [],
    "steps": [
        {
            "id": 6,
            "parent": 0,
            "case": 9,
            "version": 1,
            "type": "step",
            "desc": "步骤1",
            "expect": "结果1"
        }
    ],
    "files": [],
    "currentVersion": 1,
    "caseFails": 0
}
```

---

### PUT /testcases/:id - Update Test Case

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| module | int | No | 所属模块 |
| story | int | No | 所属需求 |
| title | string | No | 用例标题 |
| type | string | No | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
| stage | string | No | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
| precondition | string | No | 前置条件 |
| pri | int | No | 优先级 |
| steps | array | No | 用例步骤 |
| keywords | string | No | 关键词 |

**Request Example:**

```json
{
    "title": "case1",
    "pri": 1,
    "steps": [
        {
            "desc": "步骤1",
            "expect": "结果1"
        }
    ],
    "type": "feature"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用例ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属分支 |
| module | int | Yes | 所属模块 |
| story | int | Yes | 相关需求 |
| storyVersion | int | Yes | 需求版本 |
| title | string | Yes | 需求标题 |
| precondition | string | Yes | 前置条件 |
| pri | int | Yes | 优先级 |
| type | string | Yes | 用例类型(feature 功能测试 | performance 性能测试 | config 配置相关 | install 安装部署 | security 安全相关 | interface 接口测试 | unit 单元测试 | other 其他) |
| stage | string | Yes | 适用阶段(unittest 单元测试阶段 | feature 功能测试阶段 | intergrate 集成测试阶段 | system 系统测试阶段 | smoke 冒烟测试阶段 | bvt 版本验证阶段) |
| steps | array | Yes | 用例步骤列表 |
|   └─ steps.desc | string | Yes | 步骤 |
|   └─ steps.expect | string | Yes | 期望 |
| fromBug | int | No | 来自于Bug |
| fromCaseID | int | No | 来自于用例 |
| openedBy | string | Yes | 创建人 |
| openedDate | datetime | Yes | 创建时间 |

**Response Example:**

```json
{
    "id": 9,
    "project": 0,
    "product": 1,
    "execution": 0,
    "branch": 0,
    "lib": 0,
    "module": 0,
    "path": 0,
    "story": 0,
    "storyVersion": 1,
    "title": "case1",
    "precondition": "",
    "keywords": "",
    "pri": 1,
    "type": "feature",
    "auto": "no",
    "frame": "",
    "stage": "",
    "howRun": "",
    "scriptedBy": "",
    "scriptedDate": null,
    "scriptStatus": "",
    "scriptLocation": "",
    "status": "normal",
    "subStatus": "",
    "color": "",
    "frequency": "1",
    "order": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "管理员"
    },
    "openedDate": "2021-11-29T07:24:42Z",
    "reviewedBy": null,
    "reviewedDate": null,
    "lastEditedBy": null,
    "lastEditedDate": null,
    "version": 1,
    "linkCase": "",
    "fromBug": 0,
    "fromCaseID": 0,
    "fromCaseVersion": 1,
    "deleted": false,
    "lastRunner": "",
    "lastRunDate": null,
    "lastRunResult": "",
    "toBugs": [],
    "steps": [
        {
            "id": 6,
            "parent": 0,
            "case": 9,
            "version": 1,
            "type": "step",
            "desc": "步骤1",
            "expect": "结果1"
        }
    ],
    "files": [],
    "currentVersion": 1,
    "caseFails": 0
}
```

---

### DELETE /testcases/:id - Delete Test Case

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### GET /products/:id/plans - Get Product Plan List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | 计划总数 |
| limit | int | Yes | 每页计划数 |
| plans | array | Yes | 计划列表 |
|   └─ plans.id | int | Yes | 计划ID |
|   └─ plans.product | int | Yes | 所属产品 |
|   └─ plans.branch | int | Yes | 所属分支 |
|   └─ plans.title | string | Yes | 计划名称 |
|   └─ plans.desc | string | Yes | 计划描述 |
|   └─ plans.begin | date | Yes | 开始日期 |
|   └─ plans.end | date | Yes | 结束日期 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "plans": [
        {
            "id": 1,
            "product": 1,
            "branch": 0,
            "parent": 0,
            "title": "1.0版本",
            "desc": "开发出企业网站1.0版本。<br />",
            "begin": "2020-06-05",
            "end": "2021-06-04",
            "order": "",
            "deleted": "0",
            "stories": 6,
            "bugs": 0,
            "hour": 5,
            "project": "",
            "projectID": ""
        }
    ]
}
```

---

### GET /productplans/:id - Get Plan Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 2,
    "product": 4,
    "branch": 0,
    "parent": 0,
    "title": "主干计划",
    "desc": "",
    "begin": "2021-11-23",
    "end": "2021-11-29",
    "order": "",
    "deleted": false,
    "stories": [
        {
            "story": 12,
            "plan": "2",
            "order": 1,
            "id": 12,
            "parent": 0,
            "product": 4,
            "branch": 0,
            "module": 23,
            "source": "",
            "sourceNote": "",
            "fromBug": 0,
            "title": "主干需求",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 0,
            "estimate": 0,
            "status": "active",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": null,
            "openedBy": "admin",
            "openedDate": "2021-11-23 16:04:30",
            "assignedTo": "admin",
            "assignedDate": "2021-11-23 19:42:55",
            "lastEditedBy": "admin",
            "lastEditedDate": "2021-11-23 19:42:55",
            "reviewedBy": "",
            "reviewedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": "0"
        }
    ],
    "bugs": [
        {
            "id": 5,
            "project": 0,
            "product": 4,
            "branch": 1,
            "module": 24,
            "execution": 0,
            "plan": 2,
            "story": 0,
            "storyVersion": 1,
            "task": 0,
            "toTask": 0,
            "toStory": 0,
            "title": "Bug1",
            "keywords": "",
            "severity": 3,
            "pri": 3,
            "type": "codeerror",
            "os": "",
            "browser": "",
            "hardware": "",
            "found": "",
            "steps": "<p>[步骤]</p><br /><p>[结果]</p><br /><p>[期望]</p><br />",
            "status": "active",
            "subStatus": "",
            "color": "",
            "confirmed": 0,
            "activatedCount": 0,
            "activatedDate": "0000-00-00 00:00:00",
            "mailto": "",
            "openedBy": "admin",
            "openedDate": "2021-11-29 13:02:34",
            "openedBuild": "trunk",
            "assignedTo": "",
            "assignedDate": "0000-00-00 00:00:00",
            "deadline": "2021-11-29",
            "resolvedBy": "",
            "resolution": "",
            "resolvedBuild": "",
            "resolvedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "duplicateBug": 0,
            "linkBug": "",
            "case": 0,
            "caseVersion": 0,
            "result": 0,
            "repo": 0,
            "entry": "",
            "lines": "",
            "v1": "",
            "v2": "",
            "repoType": "",
            "testtask": 0,
            "lastEditedBy": "",
            "lastEditedDate": "0000-00-00 00:00:00",
            "deleted": "0"
        }
    ]
}
```

---

### PUT /productplans/:id - Update Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| branch | int | No | 所属分支 |
| title | string | Yes | 计划名称 |
| begin | date | No | 计划开始日期 |
| end | date | No | 计划结束日期 |
| desc | string | No | 计划描述 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 2,
    "product": 4,
    "branch": 0,
    "parent": 0,
    "title": "主干计划",
    "desc": "",
    "begin": "2021-11-23",
    "end": "2021-11-29",
    "order": "",
    "deleted": false,
    "stories": [
        {
            "story": 12,
            "plan": "2",
            "order": 1,
            "id": 12,
            "parent": 0,
            "product": 4,
            "branch": 0,
            "module": 23,
            "source": "",
            "sourceNote": "",
            "fromBug": 0,
            "title": "主干需求",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 0,
            "estimate": 0,
            "status": "active",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": null,
            "openedBy": "admin",
            "openedDate": "2021-11-23 16:04:30",
            "assignedTo": "admin",
            "assignedDate": "2021-11-23 19:42:55",
            "lastEditedBy": "admin",
            "lastEditedDate": "2021-11-23 19:42:55",
            "reviewedBy": "",
            "reviewedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": "0"
        }
    ],
    "bugs": [
        {
            "id": 5,
            "project": 0,
            "product": 4,
            "branch": 1,
            "module": 24,
            "execution": 0,
            "plan": 2,
            "story": 0,
            "storyVersion": 1,
            "task": 0,
            "toTask": 0,
            "toStory": 0,
            "title": "Bug1",
            "keywords": "",
            "severity": 3,
            "pri": 3,
            "type": "codeerror",
            "os": "",
            "browser": "",
            "hardware": "",
            "found": "",
            "steps": "<p>[步骤]</p><br /><p>[结果]</p><br /><p>[期望]</p><br />",
            "status": "active",
            "subStatus": "",
            "color": "",
            "confirmed": 0,
            "activatedCount": 0,
            "activatedDate": "0000-00-00 00:00:00",
            "mailto": "",
            "openedBy": "admin",
            "openedDate": "2021-11-29 13:02:34",
            "openedBuild": "trunk",
            "assignedTo": "",
            "assignedDate": "0000-00-00 00:00:00",
            "deadline": "2021-11-29",
            "resolvedBy": "",
            "resolution": "",
            "resolvedBuild": "",
            "resolvedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "duplicateBug": 0,
            "linkBug": "",
            "case": 0,
            "caseVersion": 0,
            "result": 0,
            "repo": 0,
            "entry": "",
            "lines": "",
            "v1": "",
            "v2": "",
            "repoType": "",
            "testtask": 0,
            "lastEditedBy": "",
            "lastEditedDate": "0000-00-00 00:00:00",
            "deleted": "0"
        }
    ]
}
```

---

### DELETE /productsplan/:id - Delete Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### POST /productplans/:id/linkstories - Link Stories to Product Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| stories | array | No | 新增关联的需求，比如 [1, 2] |

**Request Example:**

```json
{
    "stories": [ 11 ]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 4,
    "product": 4,
    "branch": 2,
    "parent": 0,
    "title": "分支2计划",
    "desc": "",
    "begin": "2021-11-30",
    "end": "2021-12-06",
    "order": "",
    "deleted": false,
    "stories": [
        {
            "story": 11,
            "plan": "4",
            "order": 1,
            "id": 11,
            "parent": 0,
            "product": 4,
            "branch": 2,
            "module": 22,
            "source": "",
            "sourceNote": "",
            "fromBug": 0,
            "title": "分支2需求",
            "keywords": "",
            "type": "story",
            "category": "feature",
            "pri": 3,
            "estimate": 0,
            "status": "active",
            "subStatus": "",
            "color": "",
            "stage": "planned",
            "stagedBy": "",
            "mailto": "",
            "openedBy": "admin",
            "openedDate": "2021-11-23 15:37:37",
            "assignedTo": "",
            "assignedDate": "0000-00-00 00:00:00",
            "lastEditedBy": "",
            "lastEditedDate": "0000-00-00 00:00:00",
            "reviewedBy": "",
            "reviewedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "closedReason": "",
            "toBug": 0,
            "childStories": "",
            "linkStories": "",
            "duplicateStory": 0,
            "version": 1,
            "URChanged": "0",
            "deleted": "0"
        }
    ],
    "bugs": []
}
```

---

### POST /productplans/:id/unlinkstories - Unlink Stories from Product Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| stories | array | Yes | 取消关联的需求ID，比如 [1, 2] |

**Request Example:**

```json
{
    "stories": [11]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 4,
    "product": 4,
    "branch": 2,
    "parent": 0,
    "title": "分支2计划",
    "desc": "",
    "begin": "2021-11-30",
    "end": "2021-12-06",
    "order": "",
    "deleted": false,
    "stories": [],
    "bugs": []
}
```

---

### POST /products/:id/linkBugs - Link Bugs to Product Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| bugs | array | Yes | 关联的Bug ID，比如 [1, 2] |

**Request Example:**

```json
{
    "bugs": [7]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 4,
    "product": 4,
    "branch": 2,
    "parent": 0,
    "title": "分支2计划",
    "desc": "",
    "begin": "2021-11-30",
    "end": "2021-12-06",
    "order": "",
    "deleted": false,
    "stories": [],
    "bugs": [
        {
            "id": 7,
            "project": 0,
            "product": 4,
            "branch": 0,
            "module": 0,
            "execution": 0,
            "plan": 4,
            "story": 0,
            "storyVersion": 1,
            "task": 0,
            "toTask": 0,
            "toStory": 0,
            "title": "Bug1",
            "keywords": "",
            "severity": 3,
            "pri": 3,
            "type": "codeerror",
            "os": "",
            "browser": "",
            "hardware": "",
            "found": "",
            "steps": "<p>[步骤]</p>\n<br />\n<p>[结果]</p>\n<br />\n<p>[期望]</p>\n<br />",
            "status": "active",
            "subStatus": "",
            "color": "",
            "confirmed": 0,
            "activatedCount": 0,
            "activatedDate": "0000-00-00 00:00:00",
            "mailto": "",
            "openedBy": "admin",
            "openedDate": "2021-12-01 09:25:23",
            "openedBuild": "trunk",
            "assignedTo": "",
            "assignedDate": "0000-00-00 00:00:00",
            "deadline": "0000-00-00",
            "resolvedBy": "",
            "resolution": "",
            "resolvedBuild": "",
            "resolvedDate": "0000-00-00 00:00:00",
            "closedBy": "",
            "closedDate": "0000-00-00 00:00:00",
            "duplicateBug": 0,
            "linkBug": "",
            "case": 0,
            "caseVersion": 0,
            "result": 0,
            "repo": 0,
            "entry": "",
            "lines": "",
            "v1": "",
            "v2": "",
            "repoType": "",
            "testtask": 0,
            "lastEditedBy": "",
            "lastEditedDate": "0000-00-00 00:00:00",
            "deleted": "0"
        }
    ]
}
```

---

### POST /productplans/:id/unlinkbugs - Unlink Bugs from Product Plan

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| bugs | array | Yes | 取消关联的Bug ID，比如 [1, 2] |

**Request Example:**

```json
{
    "bugs": [7]
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 计划ID |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属计划 |
| parent | int | Yes | 父计划 |
| title | string | Yes | 计划名称 |
| desc | string | Yes | 计划描述 |
| begin | date | Yes | 计划开始日期 |
| end | date | Yes | 计划结束日期 |
| stories | array | Yes | 关联需求 |
|   └─ stories.id | int | Yes | 需求ID |
|   └─ stories.title | string | Yes | 需求标题 |
|   └─ stories.product | int | Yes | 所属产品 |
|   └─ stories.branch | int | Yes | 所属分支 |
|   └─ stories.category | string | Yes | 需求类型(feature 功能 | interface 接口 | performance 性能 | safe 安全 | experience 体验 | improve 改进 | other 其他) |
|   └─ stories.pri | int | Yes | 需求优先级 |
| bugs | array | Yes | 关联Bug |
|   └─ bugs.id | int | Yes | Bug ID |
|   └─ bugs.product | int | Yes | 产品ID |
|   └─ bugs.branch | int | Yes | 所属分支 |
|   └─ bugs.module | int | Yes | 所属模块 |
|   └─ bugs.execution | int | Yes | 所属执行 |
|   └─ bugs.story | int | Yes | 相关需求 |
|   └─ bugs.title | string | Yes | Bug标题 |
|   └─ bugs.severity | int | Yes | 严重程度 |
|   └─ bugs.pri | int | Yes | Bug优先级 |
|   └─ bugs.type | string | Yes | Bug类型 |
|   └─ bugs.steps | string | Yes | Bug复现步骤 |
|   └─ bugs.status | string | Yes | Bug状态(active 激活 | resolved 已解决 | closed 已关闭) |

**Response Example:**

```json
{
    "id": 4,
    "product": 4,
    "branch": 2,
    "parent": 0,
    "title": "分支2计划",
    "desc": "",
    "begin": "2021-11-30",
    "end": "2021-12-06",
    "order": "",
    "deleted": false,
    "stories": [],
    "bugs": []
}
```

---

### GET /projects/:id/builds - Get Project Build List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| total | int | Yes | 版本总数 |
| builds | array | Yes | 版本列表 |
|   └─ builds.id | int | Yes | 版本ID |
|   └─ builds.project | int | Yes | 所属项目 |
|   └─ builds.product | int | Yes | 所属产品 |
|   └─ builds.branch | int | Yes | 所属分支 |
|   └─ builds.execution | int | Yes | 所属执行 |
|   └─ builds.name | string | Yes | 版本名称 |
|   └─ builds.scmPath | string | No | 源代码地址 |
|   └─ builds.filePath | string | No | 下载地址 |
|   └─ builds.date | date | Yes | 打包日期 |
|   └─ builds.builder | 1 | Yes | 构建者 |
|   └─ builds.desc | string | Yes | 版本描述 |

**Response Example:**

```json
{
    "total": 1,
    "builds": [
        {
            "id": 2,
            "project": 12,
            "product": 5,
            "branch": 0,
            "execution": 40,
            "name": "1111111",
            "scmPath": "",
            "filePath": "",
            "date": "2021-12-01",
            "stories": [],
            "bugs": [],
            "builder": "admin",
            "desc": "",
            "deleted": false,
            "executionName": "测试执行1111111",
            "executionID": 40,
            "productName": "测试",
            "branchName": ""
        }
    ]
}
```

---

### GET /executions/:id/builds - Get Execution Build List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| total | int | Yes | 版本总数 |
| builds | array | Yes | 版本列表 |
|   └─ builds.id | int | Yes | 版本ID |
|   └─ builds.project | int | Yes | 所属项目 |
|   └─ builds.product | int | Yes | 所属产品 |
|   └─ builds.branch | int | Yes | 所属分支 |
|   └─ builds.execution | int | Yes | 所属执行 |
|   └─ builds.name | string | Yes | 版本名称 |
|   └─ builds.scmPath | string | No | 源代码地址 |
|   └─ builds.filePath | string | No | 下载地址 |
|   └─ builds.date | date | Yes | 打包日期 |
|   └─ builds.builder | 1 | Yes | 构建者 |
|   └─ builds.desc | string | Yes | 版本描述 |

**Response Example:**

```json
{
    "total": 1,
    "builds": [
        {
            "id": 2,
            "project": 12,
            "product": 5,
            "branch": 0,
            "execution": 40,
            "name": "1111111",
            "scmPath": "",
            "filePath": "",
            "date": "2021-12-01",
            "stories": [],
            "bugs": [],
            "builder": "admin",
            "desc": "",
            "deleted": false,
            "executionName": "测试执行1111111",
            "executionID": 40,
            "productName": "测试",
            "branchName": ""
        }
    ]
}
```

---

### PUT /builds/:id - Update Build

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 版本ID |
| project | int | Yes | 所属项目 |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属产品分支（主分支为0） |
| execution | int | Yes | 所属执行 |
| name | string | Yes | 版本名称 |
| scmPath | string | Yes | 源代码地址 |
| filePath | string | Yes | 下载地址 |
| desc | string | Yes | 版本描述 |
| builder | 1 | Yes | 构建者 |
| date | date | Yes | 打包日期 |

**Response Example:**

```json
{
    "id": 3,
    "project": 41,
    "product": 4,
    "branch": 0,
    "execution": 42,
    "name": "test",
    "scmPath": "",
    "filePath": "",
    "date": "2021-01-01",
    "stories": "",
    "bugs": "",
    "builder": "admin",
    "desc": "",
    "deleted": "0",
    "executionName": "testt",
    "productName": "多分支产品",
    "productType": "branch",
    "files": []
}
```

---

### POST /projects/:id/builds - Create Build

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| execution | int | Yes | 所属执行 |
| product | int | Yes | 所属产品 |
| branch | int | No | 所属分支 |
| name | string | Yes | 版本名称 |
| builder | string | Yes | 构建者 |
| date | date | No | 打包日期 |
| scmPath | string | No | 源代码地址 |
| filePath | string | No | 下载地址 |
| desc | string | No | 版本描述 |

**Request Example:**

```json
{
    "name": "test",
    "product": 4,
    "date": "2021-01-01",
    "execution": 42,
    "builder": "admin"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 版本ID |
| project | int | Yes | 所属项目 |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属产品分支（主分支为0） |
| execution | int | Yes | 所属执行 |
| name | string | Yes | 版本名称 |
| scmPath | string | Yes | 源代码地址 |
| filePath | string | Yes | 下载地址 |
| desc | string | Yes | 版本描述 |
| builder | 1 | Yes | 构建者 |
| date | date | Yes | 打包日期 |

**Response Example:**

```json
{
    "id": 3,
    "project": 41,
    "product": 4,
    "branch": 0,
    "execution": 42,
    "name": "test",
    "scmPath": "",
    "filePath": "",
    "date": "2021-01-01",
    "stories": "",
    "bugs": "",
    "builder": "admin",
    "desc": "",
    "deleted": "0",
    "executionName": "testt",
    "productName": "多分支产品",
    "productType": "branch",
    "files": []
}
```

---

### GET /builds/:id - Get Build Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 版本ID |
| project | int | Yes | 所属项目 |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属产品分支（主分支为0） |
| execution | int | Yes | 所属执行 |
| name | string | Yes | 版本名称 |
| scmPath | string | Yes | 源代码地址 |
| filePath | string | Yes | 下载地址 |
| desc | string | Yes | 版本描述 |
| builder | 1 | Yes | 构建者 |
| date | date | Yes | 打包日期 |

**Response Example:**

```json
{
    "id": 3,
    "project": 41,
    "product": 4,
    "branch": 0,
    "execution": 42,
    "name": "test",
    "scmPath": "",
    "filePath": "",
    "date": "2021-01-01",
    "stories": "",
    "bugs": "",
    "builder": "admin",
    "desc": "",
    "deleted": "0",
    "executionName": "testt",
    "productName": "多分支产品",
    "productType": "branch",
    "files": []
}
```

---

### DELETE /builds/:id - Delete Build

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 版本ID |
| project | int | Yes | 所属项目 |
| product | int | Yes | 所属产品 |
| branch | int | Yes | 所属产品分支（主分支为0） |
| execution | int | Yes | 所属执行 |
| name | string | Yes | 版本名称 |
| scmPath | string | Yes | 源代码地址 |
| filePath | string | Yes | 下载地址 |
| desc | string | Yes | 版本描述 |
| builder | string | Yes | 构建者 |
| date | date | Yes | 打包日期 |

**Response Example:**

```json
{
    "id": 3,
    "project": 41,
    "product": 4,
    "branch": 0,
    "execution": 42,
    "name": "test",
    "scmPath": "",
    "filePath": "",
    "date": "2021-01-01",
    "stories": "",
    "bugs": "",
    "builder": "admin",
    "desc": "",
    "deleted": "0",
    "executionName": "testt",
    "productName": "多分支产品",
    "productType": "branch",
    "files": []
}
```

---

### GET /testtasks - Get Test Task List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| page | No | 当前页数，默认为1 |
| limit | No | 每页测试单数，默认20个 |
| order | No | 排序，默认 id_desc 按照id倒序 |
| product | No | 所属产品 |
| branch | No | 所属分支 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页面 |
| total | int | Yes | Bug总数 |
| limit | int | Yes | 每页Bug数 |
| testtasks | array | Yes | 测试单列表 |
|   └─ testtasks.id | int | Yes | 测试单编号 |
|   └─ testtasks.project | int | Yes | 所属项目 |
|   └─ testtasks.product | int | Yes | 所属产品 |
|   └─ testtasks.name | string | Yes | 测试单名称 |
|   └─ testtasks.execution | int | Yes | 所属执行 |
|   └─ testtasks.build | int | Yes | 所属版本 |
|   └─ testtasks.type | string | No | 类型 |
|   └─ testtasks.owner | 1 | No | 负责人 |
|   └─ testtasks.pri | int | No | 优先级 |
|   └─ testtasks.begin | date | No | 开始日期 |
|   └─ testtasks.end | date | No | 结束日期 |
|   └─ testtasks.desc | string | Yes | 描述 |
|   └─ testtasks.status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已关闭 | blocked 被阻塞) |
|   └─ testtasks.branch | int | Yes | 所属分支 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "testtasks": [
        {
            "id": 1,
            "project": 0,
            "product": 1,
            "name": "企业网站第一期测试任务",
            "execution": 1,
            "build": "1",
            "type": "",
            "owner": "testManager",
            "pri": 0,
            "begin": "2020-06-05",
            "end": "2021-06-21",
            "realFinishedDate": null,
            "mailto": "",
            "desc": "",
            "report": "",
            "status": "wait",
            "testreport": 0,
            "auto": "no",
            "subStatus": "",
            "deleted": "0",
            "productName": "公司企业网站建设1",
            "executionName": "企业网站第一期",
            "buildName": "第一期版本",
            "branch": 0
        }
    ]
}
```

---

### GET /projects/:id/testtasks - Get Project Test Tasks

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页面 |
| total | int | Yes | Bug总数 |
| limit | int | Yes | 每页Bug数 |
| testtasks | array | Yes | 测试单列表 |
|   └─ testtasks.id | int | Yes | 测试单编号 |
|   └─ testtasks.project | int | Yes | 所属项目 |
|   └─ testtasks.product | int | Yes | 所属产品 |
|   └─ testtasks.name | string | Yes | 测试单名称 |
|   └─ testtasks.execution | int | Yes | 所属执行 |
|   └─ testtasks.build | int | Yes | 所属版本 |
|   └─ testtasks.type | string | No | 类型 |
|   └─ testtasks.owner | 1 | No | 负责人 |
|   └─ testtasks.pri | int | No | 优先级 |
|   └─ testtasks.begin | date | No | 开始日期 |
|   └─ testtasks.end | date | No | 结束日期 |
|   └─ testtasks.desc | string | Yes | 描述 |
|   └─ testtasks.status | string | Yes | 状态(wait 未开始 | doing 进行中 | done 已关闭 | blocked 被阻塞) |
|   └─ testtasks.branch | int | Yes | 所属分支 |

**Response Example:**

```json
{
    "page": 1,
    "total": 1,
    "limit": 20,
    "testtasks": [
        {
            "id": 1,
            "project": 0,
            "product": 1,
            "name": "企业网站第一期测试任务",
            "execution": 1,
            "build": "1",
            "type": "",
            "owner": "testManager",
            "pri": 0,
            "begin": "2020-06-05",
            "end": "2021-06-21",
            "realFinishedDate": null,
            "mailto": "",
            "desc": "",
            "report": "",
            "status": "wait",
            "testreport": 0,
            "auto": "no",
            "subStatus": "",
            "deleted": "0",
            "productName": "公司企业网站建设1",
            "executionName": "企业网站第一期",
            "buildName": "第一期版本",
            "branch": 0
        }
    ]
}
```

---

### GET /users/:id - Get User Info

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用户编号 |
| type | string | Yes | 类型(inside 内部用户 | outside 外部用户) |
| dept | int | Yes | 所属部门 |
| account | string | Yes | 用户名 |
| role | string | Yes | 角色 |
| realname | string | Yes | 真实姓名 |
| nickname | string | No | 昵称 |
| avatar | string | No | 头像 |
| birthday | date | No | 生日 |
| gender | string | No | 性别(f 女性 | m 男性) |
| email | string | No | 邮箱 |
| mobile | string | No | 手机号 |
| phone | string | No | 电话号 |
| weixin | string | No | 微信号 |
| join | date | No | 加入日期 |

**Response Example:**

```json
{
    "id": 2,
    "company": 0,
    "type": "inside",
    "dept": 5,
    "account": "productManager",
    "role": "po",
    "realname": "产品经理",
    "nickname": "",
    "commiter": "",
    "avatar": "",
    "birthday": "0000-00-00",
    "gender": "m",
    "email": "",
    "skype": "",
    "qq": "",
    "mobile": "",
    "phone": "",
    "weixin": "",
    "dingding": "",
    "slack": "",
    "whatsapp": "",
    "address": "",
    "zipcode": "",
    "nature": "",
    "analysis": "",
    "strategy": "",
    "join": "0000-00-00",
    "visits": 3,
    "ip": "192.168.0.8",
    "last": "2012-06-05 11:14:43",
    "fails": 0,
    "locked": "0000-00-00 00:00:00",
    "ranzhi": "",
    "score": 0,
    "scoreLevel": 0,
    "deleted": "0"
}
```

---

### GET /projects/:id/releases - Get Project Release List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| total | int | Yes | 发布总数 |
| releases | array | Yes | 发布列表 |
|   └─ releases.id | int | No | 发布编号 |
|   └─ releases.project | int | No | 所属项目 |
|   └─ releases.product | int | No | 所属产品 |
|   └─ releases.branch | int | No | 所属分支 |
|   └─ releases.build | int | No | 所属版本 |
|   └─ releases.name | string | No | 发布名称 |
|   └─ releases.date | date | No | 发布日期 |
|   └─ releases.desc | string | No | 描述 |
|   └─ releases.status | string | No | 状态(normal 正常 | terminate 停止维护) |

**Response Example:**

```json
{
    "total": 1,
    "releases": [
        {
            "id": 1,
            "project": 41,
            "product": 4,
            "branch": 0,
            "build": 3,
            "name": "发布test",
            "marker": "0",
            "date": "2021-12-02",
            "stories": "",
            "bugs": "",
            "leftBugs": "",
            "desc": "",
            "mailto": "",
            "notify": null,
            "status": "normal",
            "subStatus": "",
            "deleted": false,
            "productName": "多分支产品",
            "buildID": 3,
            "buildName": "test",
            "projectName": "测试"
        }
    ]
}
```

---

### GET /user - Get My Profile

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 2 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| profile | object | Yes |  |
|   └─ profile.id | int | Yes | 用户编号 |
|   └─ profile.type | string | Yes | 类型(inside 内部用户 | outside 外部用户) |
|   └─ profile.dept | int | Yes | 所属部门 |
|   └─ profile.account | string | Yes | 用户名 |
|   └─ profile.realname | string | Yes | 真实姓名 |
|   └─ profile.nickname | string | No | 昵称 |
|   └─ profile.avatar | string | No | 头像 |
|   └─ profile.birthday | date | No | 生日 |
|   └─ profile.gender | string | No | 性别(f 女性 | m 男性) |
|   └─ profile.mobile | string | No | 手机号码 |
|   └─ profile.phone | string | No | 电话号码 |
|   └─ profile.weixin | string | No | 微信号码 |
|   └─ profile.address | string | No | 住址 |
|   └─ profile.join | date | No | 加入日期 |
|   └─ profile.admin | boolean | Yes | 是否管理员 |

**Response Example:**

```json
{
    "profile": {
        "id": 1,
        "company": 0,
        "type": "inside",
        "dept": 0,
        "account": "admin",
        "role": {
            "code": "",
            "name": ""
        },
        "realname": "admin",
        "nickname": "",
        "commiter": "",
        "avatar": "",
        "birthday": null,
        "gender": "f",
        "email": "",
        "skype": "",
        "qq": "",
        "mobile": "",
        "phone": "",
        "weixin": "",
        "dingding": "",
        "slack": "",
        "whatsapp": "",
        "address": "",
        "zipcode": "",
        "nature": "",
        "analysis": "",
        "strategy": "",
        "join": null,
        "visits": 10,
        "ip": "127.0.0.1",
        "last": "2021-11-28T16:31:40Z",
        "fails": 0,
        "locked": null,
        "ranzhi": "",
        "score": 0,
        "scoreLevel": 0,
        "deleted": "0",
        "admin": true
    }
}
```

---

### GET /testtasks/:id - Get Test Task Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 3 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 测试单编号 |
| project | int | Yes | 所属项目 |
| product | int | Yes | 所属产品 |
| name | string | Yes | 测试单名称 |
| execution | int | Yes | 所属执行 |
| build | int | Yes | 所属版本 |
| type | string | No | 类型(integrate 集成测试 | system 系统测试 | acceptance 验收测试 | performance 性能测试 | safety 安全测试) |
| owner | 1 | No | 负责人 |
| pri | int | No | 优先级 |
| begin | date | No | 开始日期 |
| end | date | No | 结束日期 |
| desc | string | No | 描述 |

---

### GET /products/:id/releases - Get Product Release List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| total | int | Yes | 发布总数 |
| releases | array | Yes | 发布列表 |
|   └─ releases.id | int | No | 发布编号 |
|   └─ releases.project | int | No | 所属项目 |
|   └─ releases.product | int | No | 所属产品 |
|   └─ releases.branch | int | No | 所属分支 |
|   └─ releases.build | int | No | 所属版本 |
|   └─ releases.name | string | No | 发布名称 |
|   └─ releases.date | date | No | 发布日期 |
|   └─ releases.desc | string | No | 描述 |
|   └─ releases.status | string | No | 状态(normal 正常 | terminate 停止维护) |

**Response Example:**

```json
{
    "total": 1,
    "releases": [
        {
            "id": 1,
            "project": 41,
            "product": 4,
            "branch": 0,
            "build": 3,
            "name": "发布test",
            "marker": "0",
            "date": "2021-12-02",
            "stories": "",
            "bugs": "",
            "leftBugs": "",
            "desc": "",
            "mailto": "",
            "notify": null,
            "status": "normal",
            "subStatus": "",
            "deleted": false,
            "productName": "多分支产品",
            "buildID": 3,
            "buildName": "test",
            "projectName": "测试"
        }
    ]
}
```

---

### DELETE /users/:id - Delete User

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### POST /users - Create User

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| account | string | Yes | 账号 |
| password | string | Yes | 密码 |
| realname | string | No | 真实姓名 |
| visions | array | No | 界面 [“rnd”, “lite”]，(研发综合界面 rnd, 运营管理界面 lite)。默认是rnd |

**Request Example:**

```json
{"account": "usertest", "password": "123qwe!@#", "realname": "测试用户"}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用户id |
| account | string | Yes | 登录名 |
| type | string | Yes | 内部用户 inside, 外部用户 outside |
| gender | string | Yes | f 女性, m 男性 |
| dept | int | No | 部门ID |
| realname | string | No | 真实姓名 |

**Response Example:**

```json
{
    "id": 8,
    "company": 0,
    "type": "inside",
    "dept": 0,
    "account": "usertest",
    "role": "",
    "realname": "测试用户",
    "pinyin": "",
    "nickname": "",
    "commiter": "",
    "avatar": "",
    "birthday": "0000-00-00",
    "gender": "f",
    "email": "",
    "skype": "",
    "qq": "",
    "mobile": "",
    "phone": "",
    "weixin": "",
    "dingding": "",
    "slack": "",
    "whatsapp": "",
    "address": "",
    "zipcode": "",
    "nature": "",
    "analysis": "",
    "strategy": "",
    "join": "0000-00-00",
    "visits": 0,
    "visions": "rnd",
    "ip": "",
    "last": "1970-01-01T00:00:00Z",
    "fails": 0,
    "locked": null,
    "feedback": "0",
    "ranzhi": "",
    "ldap": "",
    "score": 0,
    "scoreLevel": 0,
    "deleted": "0",
    "clientStatus": "offline",
    "clientLang": "zh-cn"
}
```

---

### PUT /users/:id - Update User Info

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证 |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| dept | int | No | 所属部门 |
| role | string | No | 角色 |
| mobile | string | No | 手机号 |
| realname | string | No | 真实姓名 |
| email | string | No | 邮箱 |
| phone | string | No | 电话号码 |

**Request Example:**

```json
{
    "realname": "管理员"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 用户编号 |
| type | string | Yes | 类型(inside 内部用户 | outside 外部用户) |
| dept | int | Yes | 所属部门 |
| account | string | Yes | 用户名 |
| role | string | Yes | 角色 |
| realname | string | Yes | 真实姓名 |
| nickname | string | No | 昵称 |
| avatar | string | No | 头像 |
| birthday | date | No | 生日 |
| gender | string | No | 性别(f 女性 | m 男性) |
| email | string | No | 邮箱 |
| mobile | string | No | 手机号 |
| phone | string | No | 电话号 |
| weixin | string | No | 微信号 |
| join | date | No | 加入日期 |

**Response Example:**

```json
{
    "id": 2,
    "company": 0,
    "type": "inside",
    "dept": 5,
    "account": "productManager",
    "role": "po",
    "realname": "产品经理",
    "nickname": "",
    "commiter": "",
    "avatar": "",
    "birthday": "0000-00-00",
    "gender": "m",
    "email": "",
    "skype": "",
    "qq": "",
    "mobile": "",
    "phone": "",
    "weixin": "",
    "dingding": "",
    "slack": "",
    "whatsapp": "",
    "address": "",
    "zipcode": "",
    "nature": "",
    "analysis": "",
    "strategy": "",
    "join": "0000-00-00",
    "visits": 3,
    "ip": "192.168.0.8",
    "last": "2012-06-05 11:14:43",
    "fails": 0,
    "locked": "0000-00-00 00:00:00",
    "ranzhi": "",
    "score": 0,
    "scoreLevel": 0,
    "deleted": "0"
}
```

---

### GET /users - Get User List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| page | Yes | 当前页数 |
| limit | Yes | 每页用户数 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 当前页数 |
| total | int | Yes | 用户总数 |
| limit | int | Yes | 每页用户数 |
| users | array | Yes | 用户列表 |
|   └─ users.id | int | Yes | 用户编号 |
|   └─ users.dept | int | Yes | 所属部门 |
|   └─ users.account | string | Yes | 用户名 |
|   └─ users.realname | string | Yes | 真实姓名 |
|   └─ users.role | string | No | 角色 |
|   └─ users.email | string | No | 邮箱 |

**Response Example:**

```json
{
    "page": 1,
    "total": 3,
    "limit": 20,
    "users": [
        {
            "id": 3,
            "dept": 6,
            "account": "projectManager",
            "realname": "项目经理",
            "role": "pm",
            "email": ""
        },
        {
            "id": 2,
            "dept": 5,
            "account": "productManager",
            "realname": "产品经理",
            "role": "po",
            "email": ""
        },
        {
            "id": 1,
            "dept": 0,
            "account": "admin",
            "realname": "admin",
            "role": "",
            "email": ""
        }
    ]
}
```

---

### GET /feedbacks/:id - Get Feedback Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 反馈id |
| product | int | Yes | 所属产品 |
| module | int | Yes | 所属分类 |
| title | string | Yes | 标题 |
| type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| desc | string | Yes | 描述 |
| status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
| subStatus | string | Yes | 子状态 |
| public | int | Yes | 公开 |
| notify | int | Yes | 通知 |
| notifyEmail | string | Yes | 通知邮箱 |
| likes | string | Yes | 点赞人 |
| result | int | Yes | 转化结果 |
| faq | int | Yes | FAQ |
| openedBy | 14 | Yes | 创建人 |
| openedDate | date | Yes | 创建时间 |
| reviewedBy | string | Yes | 由谁评审 |
| reviewedDate | datetime | Yes | 评审时间 |
| processedBy | string | Yes | 由谁处理 |
| processedDate | datetime | Yes | 处理时间 |
| closedBy | 14 | Yes | 由谁关闭 |
| closedDate | datetime | Yes | 关闭时间 |
| closedReason | string | Yes | 关闭原因 |
| editedBy | string | Yes | 最后处理人 |
| editedDate | date | Yes | 最后修改时间 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派时间 |
| feedbackBy | string | Yes | 反馈者 |
| mailto | array | Yes | 抄送给 |
| deleted | int | Yes | 已删除 |
| likesCount | int | Yes | 点赞总数 |
| productName | string | Yes | 产品名称 |

**Response Example:**

```json
{
    "id": 4,
    "product": 2,
    "module": 0,
    "title": "一个反馈",
    "type": "",
    "solution": "",
    "desc": "",
    "status": "wait",
    "subStatus": "",
    "public": "0",
    "notify": "1",
    "notifyEmail": "",
    "likes": "",
    "result": 0,
    "faq": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "openedDate": "2022-06-10T03:18:52Z",
    "reviewedBy": "",
    "reviewedDate": "0000-00-00 00:00:00",
    "processedBy": "",
    "processedDate": "0000-00-00 00:00:00",
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "editedBy": "admin",
    "editedDate": "2022-06-10 11:18:52",
    "assignedTo": null,
    "assignedDate": "2022-06-10T03:18:52Z",
    "feedbackBy": "",
    "mailto": [],
    "deleted": false,
    "likesCount": 0,
    "files": [],
    "likeIcon": "thumbs-up",
    "publicStatus": "0",
    "productName": "产品X",
    "moduleName": "/",
    "resultType": "",
    "actions": [
        {
            "id": 163,
            "objectType": "feedback",
            "objectID": 4,
            "product": ",0,",
            "project": 0,
            "execution": 0,
            "actor": "admin",
            "action": "opened",
            "date": "2022-06-10 11:18:52",
            "comment": "",
            "extra": "",
            "read": "0",
            "vision": "rnd",
            "efforted": 0,
            "history": [],
            "desc": "2022-06-10 11:18:52, 由 <strong>admin</strong> 创建。\n"
        }
    ]
}
```

---

### PUT /feedbacks/:id - Update Feedback

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| product | int | No | 所属产品 |
| module | int | No | 所属分类 |
| title | string | No | 标题 |
| type | string | No | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| desc | string | No | 描述 |
| public | int | No | 公开 |
| notify | int | No | 通知 |
| notifyEmail | string | No | 通知邮箱 |
| feedbackBy | string | No | 反馈者 |

**Request Example:**

```json
{
    "title": "test",
    "desc": "edit test"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 反馈id |
| product | int | Yes | 所属产品 |
| module | int | Yes | 所属分类 |
| title | string | Yes | 标题 |
| type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| desc | string | Yes | 描述 |
| status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
| subStatus | string | Yes | 子状态 |
| public | int | Yes | 公开 |
| notify | int | Yes | 通知 |
| notifyEmail | string | Yes | 通知邮箱 |
| likes | string | Yes | 点赞人 |
| result | int | Yes | 转化结果 |
| faq | int | Yes | FAQ |
| openedBy | 14 | Yes | 创建人 |
| openedDate | date | Yes | 创建时间 |
| reviewedBy | string | Yes | 由谁评审 |
| reviewedDate | date | Yes | 评审时间 |
| processedBy | string | Yes | 由谁处理 |
| processedDate | date | Yes | 处理时间 |
| closedBy | 14 | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭时间 |
| closedReason | string | Yes | 关闭原因 |
| editedBy | string | Yes | 最后处理人 |
| editedDate | date | Yes | 最后修改时间 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派时间 |
| feedbackBy | string | Yes | 反馈者 |
| mailto | array | Yes | 抄送给 |
| deleted | int | Yes | 已删除 |
| likesCount | int | Yes | 点赞总数 |

**Response Example:**

```json
{
    "id": 2,
    "product": 2,
    "module": 0,
    "title": "test",
    "type": "",
    "solution": "",
    "desc": "edit test",
    "status": "wait",
    "subStatus": "",
    "public": "0",
    "notify": "1",
    "notifyEmail": "",
    "likes": "",
    "result": 0,
    "faq": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "openedDate": "2022-06-10T00:56:02Z",
    "reviewedBy": null,
    "reviewedDate": null,
    "processedBy": null,
    "processedDate": null,
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "editedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "editedDate": "2022-06-28T02:48:38Z",
    "assignedTo": "admin",
    "assignedDate": "2022-06-10 15:56:14",
    "feedbackBy": "",
    "mailto": [],
    "deleted": false,
    "likesCount": 0,
    "files": []
}
```

---

### DELETE /feedbacks/:id - Delete Feedback

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

### POST /feedbacks/:id/assign - Assign Feedback

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| assignedTo | string | No | 指派给，填写用户的account字段 |
| comment | string | No | 备注 |
| mailto | string | No | 抄送给，填写用户的account字段并用“,”分开 |

**Request Example:**

```json
{
    "assignedTo": "admin",
    "comment":"yes"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 反馈ID |
| product | int | Yes | 所属产品 |
| module | int | Yes | 所属分类 |
| title | string | Yes | 标题 |
| type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| desc | string | Yes | 描述 |
| status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
| subStatus | string | Yes | 子状态 |
| public | int | Yes | 公开 |
| notify | int | Yes | 通知 |
| notifyEmail | string | Yes | 通知邮箱 |
| likes | string | Yes | 点赞人 |
| result | int | Yes | 转化结果 |
| faq | int | Yes | FAQ |
| openedBy | 14 | Yes | 创建人 |
| openedDate | date | Yes | 创建时间 |
| reviewedBy | string | Yes | 由谁评审 |
| reviewedDate | date | Yes | 评审时间 |
| processedBy | string | Yes | 由谁处理 |
| processedDate | date | Yes | 处理时间 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭时间 |
| closedReason | string | Yes | 关闭原因 |
| editedBy | string | Yes | 最后处理人 |
| editedDate | date | Yes | 最后修改时间 |
| assignedTo | 14 | Yes | 指派给 |
| assignedDate | date | Yes | 指派时间 |
| feedbackBy | string | Yes | 反馈者 |
| mailto | array | Yes | 抄送给 |
| deleted | int | Yes | 已删除 |
| likesCount | int | Yes | 点赞总数 |

**Response Example:**

```json
{
    "id": 2,
    "product": 2,
    "module": 0,
    "title": "test",
    "type": "",
    "solution": "",
    "desc": "edit test1",
    "status": "wait",
    "subStatus": "",
    "public": "1",
    "notify": "1",
    "notifyEmail": "",
    "likes": "",
    "result": 0,
    "faq": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "openedDate": "2022-06-10T00:56:02Z",
    "reviewedBy": "",
    "reviewedDate": "0000-00-00 00:00:00",
    "processedBy": "",
    "processedDate": "0000-00-00 00:00:00",
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "editedBy": "admin",
    "editedDate": "2022-06-28 11:55:08",
    "assignedTo": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "assignedDate": "2022-06-28T03:55:08Z",
    "feedbackBy": "",
    "mailto": [],
    "deleted": false,
    "likesCount": 0,
    "files": []
}
```

---

### POST /feedbacks/:id/close - Close Feedback

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| closedReason | string | No | 关闭原因（commented 已处理 | repeat 重复 | refuse 不予采纳） |
| comment | string | No | 备注 |

**Request Example:**

```json
{
    "closedReason":"repeat"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 反馈id |
| product | int | Yes | 所属产品 |
| module | int | Yes | 所属分类 |
| title | string | Yes | 所属分类 |
| type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| desc | string | Yes | 描述 |
| status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
| subStatus | string | Yes | 子状态 |
| public | int | Yes | 公开 |
| notify | int | Yes | 通知 |
| notifyEmail | string | Yes | 通知邮箱 |
| likes | string | Yes | 点赞人 |
| result | int | Yes | 转化结果 |
| faq | int | Yes | FAQ |
| openedBy | string | Yes | 创建人 |
| openedDate | date | Yes | 创建时间 |
| reviewedBy | string | Yes | 由谁评审 |
| reviewedDate | date | Yes | 评审时间 |
| processedBy | string | Yes | 由谁处理 |
| processedDate | date | Yes | 处理时间 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭时间 |
| closedReason | string | Yes | 关闭原因 |
| editedBy | string | Yes | 最后处理人 |
| editedDate | date | Yes | 最后修改时间 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派时间 |
| feedbackBy | string | Yes | 反馈者 |
| mailto | array | Yes | 抄送给 |
| deleted | int | Yes | 已删除 |
| likesCount | int | Yes | 点赞总数 |

**Response Example:**

```json
{
    "id": 2,
    "product": 2,
    "module": 0,
    "title": "test",
    "type": "",
    "solution": "",
    "desc": "edit test1",
    "status": "closed",
    "subStatus": "",
    "public": "1",
    "notify": "1",
    "notifyEmail": "",
    "likes": "",
    "result": 0,
    "faq": 0,
    "openedBy": "admin",
    "openedDate": "2022-06-10 08:56:02",
    "reviewedBy": "",
    "reviewedDate": "0000-00-00 00:00:00",
    "processedBy": "",
    "processedDate": "0000-00-00 00:00:00",
    "closedBy": "admin",
    "closedDate": "2022-06-28 13:15:42",
    "closedReason": "repeat",
    "editedBy": "admin",
    "editedDate": "2022-06-28 13:15:42",
    "assignedTo": "closed",
    "assignedDate": "2022-06-28 11:55:08",
    "feedbackBy": "",
    "mailto": "",
    "deleted": "0",
    "likesCount": 0,
    "files": []
}
```

---

### POST /feedbacks - Create Feedback

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** admin

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| product | int | Yes | 所属产品 |
| module | int | No | 所属分类 |
| title | string | Yes | 标题 |
| type | string | No | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| desc | string | No | 描述 |
| public | int | No | 公开 |
| notify | int | No | 通知 |
| notifyEmail | string | No | 通知邮箱 |
| feedbackBy | string | No | 反馈者 |

**Request Example:**

```json
{
    "product": 2,
    "title":"create test feedback"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 反馈id |
| product | int | Yes | 所属产品 |
| module | int | Yes | 所属分类 |
| title | string | Yes | 标题 |
| type | string | Yes | 类型(story 需求 | task 任务 | bug Bug | todo 代办 | advice 建议) 全新项目集模式还有（issue 问题 | risk 风险 | opportunity 机会） |
| solution | string | Yes | 处理结果（unclosed 未关闭 | all 全部 | public公开 | tostory 转任务 | totask 转任务 | tobug 转Bug | totodo 转代办 | review 待评审 | assigntome 指派给我） |
| desc | string | Yes | 描述 |
| status | string | Yes | 状态(wait 待处理 | commenting 处理中 | replied 已处理 | closed 已关闭) |
| subStatus | string | Yes | 子状态 |
| public | int | Yes | 公开 |
| notify | int | Yes | 通知 |
| notifyEmail | string | Yes | 通知邮箱 |
| likes | string | Yes | 点赞人 |
| result | int | Yes | 转化结果 |
| faq | int | Yes | FAQ |
| openedBy | 14 | Yes | 创建人 |
| openedDate | date | Yes | 创建时间 |
| reviewedBy | string | Yes | 由谁评审 |
| reviewedDate | date | Yes | 评审时间 |
| processedBy | string | Yes | 由谁处理 |
| processedDate | date | Yes | 处理时间 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭时间 |
| closedReason | string | Yes | 关闭原因 |
| editedBy | 14 | Yes | 最后处理人 |
| editedDate | date | Yes | 最后修改时间 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派时间 |
| feedbackBy | string | Yes | 反馈者 |
| mailto | array | Yes | 抄送给 |
| deleted | int | Yes | 已删除 |
| likesCount | int | Yes | 点赞总数 |

**Response Example:**

```json
{
    "id": 14,
    "product": 2,
    "module": 0,
    "title": "create test feedback",
    "type": "",
    "solution": "",
    "desc": "",
    "status": "wait",
    "subStatus": "",
    "public": "0",
    "notify": "0",
    "notifyEmail": "",
    "likes": "",
    "result": 0,
    "faq": 0,
    "openedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "openedDate": "2022-06-28T05:35:43Z",
    "reviewedBy": null,
    "reviewedDate": null,
    "processedBy": null,
    "processedDate": null,
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "editedBy": {
        "id": 1,
        "account": "admin",
        "avatar": "",
        "realname": "admin"
    },
    "editedDate": "2022-06-28T05:35:43Z",
    "assignedTo": null,
    "assignedDate": "2022-06-28T05:35:43Z",
    "feedbackBy": null,
    "mailto": [],
    "deleted": false,
    "likesCount": 0,
    "files": []
}
```

---

### GET /tickets - Get Ticket List

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** wwccss

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| browseType | No | 工单状态（all 所有 | wait 待处理 | doing 处理中 | done 待关闭 | finishedbyme 由我解决 | openedbyme 由我创建 | assignedtome 指派给我） |
| param | No | 模块ID， 默认为0 |
| orderBy | No | 排序，默认id_desc；排序字段+下划线+asc/desc |
| page | No | 第几页，默认为1 |
| limit | No | 每页工单数量，默认20 |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| page | int | Yes | 页数 |
| total | int | Yes | 工单总数 |
| limit | int | Yes | 每页工单数 |
| tickets | array | Yes | 工单列表 |
|   └─ tickets.id | int | Yes | 工单ID |
|   └─ tickets.product | int | Yes | 工单所属产品 |
|   └─ tickets.module | int | Yes | 工单所属模块 |
|   └─ tickets.title | string | Yes | 工单名称 |
|   └─ tickets.type | string | Yes | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |
|   └─ tickets.desc | string | Yes | 工单描述 |
|   └─ tickets.openedBuild | string | Yes | 影响版本 |
|   └─ tickets.feedback | string | Yes | 相关反馈 |
|   └─ tickets.assignedTo | string | Yes | 指派给 |
|   └─ tickets.assignedDate | date | Yes | 指派日期 |
|   └─ tickets.realStarted | date | Yes | 实际开始 |
|   └─ tickets.startedBy | string | Yes | 由谁开始 |
|   └─ tickets.startedDate | date | Yes | 开始日期 |
|   └─ tickets.deadline | date | Yes | 截止日期 |
|   └─ tickets.pri | int | Yes | 优先级 |
|   └─ tickets.estimate | decimal | Yes | 预计 |
|   └─ tickets.left | decimal | Yes | 剩余 |
|   └─ tickets.status | string | Yes | 状态 |
|   └─ tickets.openedBy | object | Yes | 由谁创建 |
|   └─ tickets.openedDate | date | Yes | 创建日期 |
|   └─ tickets.activatedCount | int | Yes | 激活次数 |
|   └─ tickets.closedBy | string | Yes | 由谁关闭 |
|   └─ tickets.closedDate | date | Yes | 关闭日期 |
|   └─ tickets.closedReason | string | Yes | 关闭原因 |
|   └─ tickets.finishedBy | string | Yes | 由谁完成 |
|   └─ tickets.finishedDate | date | Yes | 完成日期 |
|   └─ tickets.resolvedBy | string | Yes | 由谁解决 |
|   └─ tickets.resolvedDate | date | Yes | 解决日期 |
|   └─ tickets.resolution | string | Yes | 解决方案 |
|   └─ tickets.editedBy | string | Yes | 由谁编辑 |
|   └─ tickets.editedDate | date | Yes | 编辑日期 |
|   └─ tickets.keywords | string | Yes | 关键词 |
|   └─ tickets.repeatTicket | int | Yes | 重复工单 |
|   └─ tickets.mailto | array | Yes | 抄送给 |
|   └─ tickets.deleted | string | Yes | 是否删除（0 否 | 1是） |
|   └─ tickets.consumed | decimal | Yes | 实际消耗 |

**Response Example:**

```json
{
    "page": 1,
    "total": 7,
    "limit": 20,
    "tickets": [
        {
            "id": 7,
            "product": 80,
            "module": 80,
            "title": "sgm GIAO",
            "type": "",
            "desc": "",
            "openedBuild": "",
            "feedback": 0,
            "assignedTo": null,
            "assignedDate": "0000-00-00 00:00:00",
            "realStarted": "0000-00-00 00:00:00",
            "startedBy": "",
            "startedDate": "0000-00-00 00:00:00",
            "deadline": "-0001-11-29T16:00:00Z",
            "pri": 0,
            "estimate": 0,
            "left": 0,
            "status": "wait",
            "openedBy": {
                "id": 4,
                "account": "admin",
                "avatar": "/data/upload/1/202104/02151445087773h0",
                "realname": "管理员"
            },
            "openedDate": "2022-12-21T07:45:54Z",
            "activatedCount": 0,
            "activatedBy": null,
            "activatedDate": null,
            "closedBy": null,
            "closedDate": null,
            "closedReason": "",
            "finishedBy": null,
            "finishedDate": null,
            "resolvedBy": "",
            "resolvedDate": "0000-00-00 00:00:00",
            "resolution": "",
            "editedBy": null,
            "editedDate": null,
            "keywords": "",
            "repeatTicket": 0,
            "mailto": [],
            "deleted": false,
            "consumed": 0,
        }
}
```

---

### GET /tickets/:id - Get Ticket Details

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** wwccss

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 工单ID |
| product | int | Yes | 工单所属产品 |
| module | int | Yes | 工单所属模块 |
| title | string | Yes | 工单名称 |
| type | string | Yes | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |
| desc | string | Yes | 工单描述 |
| openedBuild | string | Yes | 影响版本 |
| feedback | string | Yes | 相关反馈 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派日期 |
| realStarted | date | Yes | 实际开始 |
| startedBy | string | Yes | 由谁开始 |
| startedDate | date | Yes | 开始日期 |
| deadline | date | Yes | 截止日期 |
| pri | int | Yes | 优先级 |
| estimate | decimal | Yes | 预计 |
| left | decimal | Yes | 剩余 |
| status | string | Yes | 状态 |
| openedBy | object | Yes | 由谁创建 |
| openedDate | date | Yes | 创建日期 |
| activatedCount | int | Yes | 激活次数 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭日期 |
| closedReason | string | Yes | 关闭原因 |
| finishedBy | string | Yes | 由谁完成 |
| finishedDate | date | Yes | 完成日期 |
| resolvedBy | string | Yes | 由谁解决 |
| resolvedDate | date | Yes | 解决日期 |
| resolution | string | Yes | 解决方案 |
| editedBy | string | Yes | 由谁编辑 |
| editedDate | date | Yes | 编辑日期 |
| keywords | string | Yes | 关键词 |
| repeatTicket | int | Yes | 重复工单 |
| mailto | array | Yes | 抄送给 |
| deleted | string | Yes | 是否删除（0 否 | 1是） |
| consumed | decimal | Yes | 实际消耗 |

**Response Example:**

```json
{
    "id": 5,
    "product": 80,
    "module": 80,
    "title": "测试工单",
    "type": "",
    "desc": "",
    "openedBuild": "",
    "feedback": 0,
    "assignedTo": null,
    "assignedDate": null,
    "realStarted": "0000-00-00 00:00:00",
    "startedBy": "",
    "startedDate": "",
    "deadline": null,
    "pri": 0,
    "estimate": 0,
    "left": 0,
    "status": "wait",
    "openedBy": {
        "id": 4,
        "account": "admin",
        "avatar": "/data/upload/1/202104/02151445087773h0",
        "realname": "管理员"
    },
    "openedDate": "2022-12-21T07:43:33Z",
    "activatedCount": 0,
    "activatedBy": "",
    "activatedDate": null,
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "finishedBy": "",
    "finishedDate": "",
    "resolvedBy": null,
    "resolvedDate": null,
    "resolution": "",
    "editedBy": "admin",
    "editedDate": "2022-12-22 10:29:27",
    "keywords": "",
    "repeatTicket": 0,
    "mailto": [],
    "deleted": false,
    "consumed": 0,
    "createFiles": [],
    "finishFiles": [],
    "productName": null,
    "moduleName": "/",
    "actions": [
        {
            "id": 179347,
            "objectType": "ticket",
            "objectID": 5,
            "product": ",80,",
            "project": "0",
            "execution": 0,
            "actor": "管理员",
            "action": "opened",
            "date": "2022-12-21 15:43:33",
            "comment": "",
            "extra": "",
            "efforted": 0,
            "read": "0",
            "vision": "rnd",
            "history": [],
            "desc": "2022-12-21 15:43:33, 由 <strong>管理员</strong> 创建。\n"
        }
        }
    ]
}
```

---

### PUT /tickets/:id - Update Ticket

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 5 | **Status:** done | **Owner:** wwccss

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| product | int | Yes | 所属产品ID |
| module | int | Yes | 所属模块ID |
| title | string | Yes | 工单名称 |
| type | string | No | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |
| desc | string | No | 工单描述 |

**Request Example:**

```json
{
    "title": "test",
    "desc": "edit test"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 工单ID |
| product | int | Yes | 工单所属产品 |
| module | int | Yes | 工单所属模块 |
| title | string | Yes | 工单名称 |
| type | string | Yes | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |
| desc | string | Yes | 工单描述 |
| openedBuild | string | Yes | 影响版本 |
| feedback | string | Yes | 相关反馈 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派日期 |
| realStarted | date | Yes | 实际开始 |
| startedBy | string | Yes | 由谁开始 |
| startedDate | date | Yes | 开始日期 |
| deadline | date | Yes | 截止日期 |
| pri | int | Yes | 优先级 |
| estimate | decimal | Yes | 预计 |
| left | decimal | Yes | 剩余 |
| status | string | Yes | 状态 |
| openedBy | object | Yes | 由谁创建 |
| openedDate | date | Yes | 创建日期 |
| activatedCount | int | Yes | 激活次数 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭日期 |
| closedReason | string | Yes | 关闭原因 |
| finishedBy | string | Yes | 由谁完成 |
| finishedDate | date | Yes | 完成日期 |
| resolvedBy | string | Yes | 由谁解决 |
| resolvedDate | date | Yes | 解决日期 |
| resolution | string | Yes | 解决方案 |
| editedBy | string | Yes | 由谁编辑 |
| editedDate | date | Yes | 编辑日期 |
| keywords | string | Yes | 关键词 |
| repeatTicket | int | Yes | 重复工单 |
| mailto | array | Yes | 抄送给 |
| deleted | string | Yes | 是否删除（0 否 | 1是） |
| consumed | decimal | Yes | 实际消耗 |

**Response Example:**

```json
{
    "id": 5,
    "product": 80,
    "module": 80,
    "title": "test",
    "type": "",
    "desc": "edit test",
    "openedBuild": "",
    "feedback": 0,
    "assignedTo": null,
    "assignedDate": "",
    "realStarted": "0000-00-00 00:00:00",
    "startedBy": "",
    "startedDate": "",
    "deadline": null,
    "pri": 0,
    "estimate": 0,
    "left": 0,
    "status": "wait",
    "openedBy": {
        "id": 4,
        "account": "admin",
        "avatar": "/data/upload/1/202104/02151445087773h0",
        "realname": "管理员"
    },
    "openedDate": "2022-12-21T07:43:33Z",
    "activatedCount": 0,
    "activatedBy": null,
    "activatedDate": null,
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "finishedBy": null,
    "finishedDate": null,
    "resolvedBy": "",
    "resolvedDate": "",
    "resolution": "",
    "editedBy": {
        "id": 4,
        "account": "admin",
        "avatar": "/data/upload/1/202104/02151445087773h0",
        "realname": "管理员"
    },
    "editedDate": "2022-12-22T06:02:26Z",
    "keywords": "",
    "repeatTicket": 0,
    "mailto": [],
    "deleted": false,
    "consumed": 0,
    "sgm": "",
    "sgmA": "",
    "createFiles": [],
    "finishFiles": []
}
```

---

### POST /tickets - Create Ticket

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 6 | **Status:** done | **Owner:** wwccss

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Query Parameters:**

| Parameter | Required | Description |
|-----------|----------|-------------|
| product | Yes | 所属产品ID |
| module | Yes | 所属模块ID |
| title | Yes | 工单名称 |
| type | No | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |

**Body Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| product | int | Yes | 所属产品ID |
| module | int | Yes | 所属模块ID |
| title | string | Yes | 工单名称 |
| type | string | Yes | 工单类型 |

**Request Example:**

```json
{
    "product": 2,
    "module":2,
    "title":"create test ticket"
}
```

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | int | Yes | 工单ID |
| product | int | Yes | 工单所属产品 |
| module | int | Yes | 工单所属模块 |
| title | string | Yes | 工单名称 |
| type | string | Yes | 工单类型(code 程序报错 | data 数据错误 | stuck 流程卡断 | security 安全问题 | affair 事务) |
| desc | string | Yes | 工单描述 |
| openedBuild | string | Yes | 影响版本 |
| feedback | string | Yes | 相关反馈 |
| assignedTo | string | Yes | 指派给 |
| assignedDate | date | Yes | 指派日期 |
| realStarted | date | Yes | 实际开始 |
| startedBy | string | Yes | 由谁开始 |
| startedDate | date | Yes | 开始日期 |
| deadline | date | Yes | 截止日期 |
| pri | int | Yes | 优先级 |
| estimate | decimal | Yes | 预计 |
| left | decimal | Yes | 剩余 |
| status | string | Yes | 状态 |
| openedBy | object | Yes | 由谁创建 |
| openedDate | date | Yes | 创建日期 |
| activatedCount | int | Yes | 激活次数 |
| closedBy | string | Yes | 由谁关闭 |
| closedDate | date | Yes | 关闭日期 |
| closedReason | string | Yes | 关闭原因 |
| finishedBy | string | Yes | 由谁完成 |
| finishedDate | date | Yes | 完成日期 |
| resolvedBy | string | Yes | 由谁解决 |
| resolvedDate | date | Yes | 解决日期 |
| resolution | string | Yes | 解决方案 |
| editedBy | string | Yes | 由谁编辑 |
| editedDate | date | Yes | 编辑日期 |
| keywords | string | Yes | 关键词 |
| repeatTicket | int | Yes | 重复工单 |
| mailto | array | Yes | 抄送给 |
| deleted | string | Yes | 是否删除（0 否 | 1是） |
| consumed | decimal | Yes | 实际消耗 |

**Response Example:**

```json
{
    "id": 8,
    "product": 2,
    "module": 2,
    "title": "create test ticket",
    "type": "",
    "desc": "",
    "openedBuild": "",
    "feedback": 0,
    "assignedTo": null,
    "assignedDate": "",
    "realStarted": "0000-00-00 00:00:00",
    "startedBy": "",
    "startedDate": "",
    "deadline": null,
    "pri": 0,
    "estimate": 0,
    "left": 0,
    "status": "wait",
    "openedBy": {
        "id": 4,
        "account": "admin",
        "avatar": "/data/upload/1/202104/02151445087773h0",
        "realname": "管理员"
    },
    "openedDate": "2022-12-22T05:49:43Z",
    "activatedCount": 0,
    "activatedBy": null,
    "activatedDate": null,
    "closedBy": null,
    "closedDate": null,
    "closedReason": "",
    "finishedBy": null,
    "finishedDate": null,
    "resolvedBy": "",
    "resolvedDate": "",
    "resolution": "",
    "editedBy": null,
    "editedDate": null,
    "keywords": "",
    "repeatTicket": 0,
    "mailto": [],
    "deleted": false,
    "consumed": 0,
    "createFiles": [],
    "finishFiles": []
}
```

---

### DELETE /tickets/:id - Delete Ticket

**Protocol:** HTTP | **Request Type:** application/json | **Version:** 1 | **Status:** done | **Owner:** wwccss

**Headers:**

| Header | Required | Description |
|--------|----------|-------------|
| Token | Yes | 认证凭证Token |

**Response Structure:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | Yes | 	结果信息 |

**Response Example:**

```json
{
    "message": "success"
}
```

---

